this.BX=this.BX||{};(function(e,t,n,i){"use strict";function r(e,t,n){l(e,t);s(n,"get");return o(e,n)}function o(e,t){if(t.get){return t.get.call(e)}return t.value}function a(e,t,n,i){l(e,t);s(n,"set");c(e,n,i);return i}function s(e,t){if(e===undefined){throw new TypeError("attempted to "+t+" private static field before its declaration")}}function l(e,t){if(e!==t){throw new TypeError("Private static access of wrong provenance")}}function c(e,t,n){if(t.set){t.set.call(e,n)}else{if(!t.writable){throw new TypeError("attempted to set read only private field")}t.value=n}}var u=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"setComponentName",value:function t(n){var i="bitrix/components/";var r=String(n).indexOf(i);if(r>0){a(this,e,h,n.substring(r+i.length).split("/").slice(0,2).join(":"))}}},{key:"getComponentName",value:function t(){if(r(this,e,h)===null){a(this,e,h,"bitrix:bitrix24.license.threshold")}return r(this,e,h)}},{key:"sendToTheCertainThresholdForTheNotification",value:function e(t){var i=t.thresholdClass,r=t.thresholdId;return n.ajax.runComponentAction(this.getComponentName(),"getNotificationForThreshold",{mode:"class",data:{thresholdClass:i,thresholdId:r}})}},{key:"readNotification",value:function e(t){return n.ajax.runComponentAction(this.getComponentName(),"readNotification",{mode:"class",data:{notificationId:t}})}},{key:"fireTestThreshold",value:function e(){return n.ajax.runComponentAction(this.getComponentName(),"fireTestThreshold",{mode:"class",data:{}})}},{key:"resetShownInfo",value:function e(){return n.ajax.runComponentAction(this.getComponentName(),"resetShownInfo",{mode:"class",data:{}})}},{key:"resetDailyLimit",value:function e(){return n.ajax.runComponentAction(this.getComponentName(),"resetDailyLimit",{mode:"class",data:{}})}}]);return e}();var h={writable:true,value:null};setTimeout((function(e){return u.setComponentName(e)}),0,document.currentScript.src);var f=function(){function e(t,n){babelHelpers.classCallCheck(this,e);this.id=t;this.landingId=n}babelHelpers.createClass(e,[{key:"show",value:function e(){var t=this;n.Runtime.loadExtension("ui.info-helper").then((function(){BX.UI.InfoHelper.show(t.landingId);var e=function e(n){var r=babelHelpers.toConsumableArray(n.getData());var o=r.shift();if(o&&o instanceof BX.SidePanel.Event&&o.slider.url==="ui:info_helper"){t.markAsRead();i.EventEmitter.unsubscribe(i.EventEmitter.GLOBAL_TARGET,"SidePanel.Slider:onCloseStart",e)}};i.EventEmitter.subscribe(i.EventEmitter.GLOBAL_TARGET,"SidePanel.Slider:onCloseStart",e)}))}},{key:"markAsRead",value:function e(){return u.readNotification(this.id)}}]);return e}();function d(e,t){v(e,t);t.add(e)}function v(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function m(e,t,n){T(e,t);p(n,"get");return b(e,n)}function p(e,t){if(e===undefined){throw new TypeError("attempted to "+t+" private static field before its declaration")}}function T(e,t){if(e!==t){throw new TypeError("Private static access of wrong provenance")}}function b(e,t){if(t.get){return t.get.call(e)}return t.value}function E(e,t,n){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return n}var C=new WeakSet;var w=new WeakSet;var g=new WeakSet;var y=function(){function e(){babelHelpers.classCallCheck(this,e);d(this,g);d(this,w);d(this,C);E(this,C,B).call(this);return this}babelHelpers.createClass(e,[{key:"notify",value:function e(t){if(n.Type.isPlainObject(t)){E(this,g,k).call(this,t)}i.EventEmitter.subscribe(i.EventEmitter.GLOBAL_TARGET,"BX:Bitrix24:LicenseScanner:Threshold:fireTest",(function(){u.fireTestThreshold()}));i.EventEmitter.subscribe(i.EventEmitter.GLOBAL_TARGET,"BX:Bitrix24:LicenseScanner:Threshold:resetShownInfo",(function(){u.resetShownInfo()}));i.EventEmitter.subscribe(i.EventEmitter.GLOBAL_TARGET,"BX:Bitrix24:LicenseScanner:Threshold:resetDailyLimit",(function(){u.resetDailyLimit()}));return this}}]);return e}();function B(){var e=this;if(t.PULL){t.PULL.subscribe({moduleId:"bitrix24",callback:function t(n){var i=n.command,r=n.params;if(i==="onThresholdHasBeenTriggered"){E(e,w,L).call(e,r)}else if(i==="onThresholdNotification"){E(e,g,k).call(e,r,true)}}})}return this}function L(e){var t=this;var n=e.thresholdClass,i=e.thresholdId;return u.sendToTheCertainThresholdForTheNotification({thresholdClass:n,thresholdId:i}).then((function(e){var n=e.data;var i=n.notificationId,r=n.landingId;E(t,g,k).call(t,{notificationId:i,landingId:r},true)}))}function k(e){var t=e.notificationId,n=e.landingId;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(m(this.constructor,y,I)[t]===true){return}m(this.constructor,y,I)[t]=true;if(i===true||BX.Bitrix24.Notify.isWorkspaceClear()){new f(t,n).show()}}var I={writable:true,value:[]};e.LicenseThreshold=y;e.LicenseThresholdNotification=f})(this.BX.Bitrix24=this.BX.Bitrix24||{},BX,BX,BX.Event);
//# sourceMappingURL=script.map.js