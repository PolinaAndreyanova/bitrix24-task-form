(function(){BX.namespace("BX.Bitrix24.LicenseInfoPopup");BX.Bitrix24.LicenseInfoPopup={licenseButtonText:"",trialButtonText:"",showFullDemoButton:"N",hostName:"",ajaxUrl:"",licenseUrl:"",demoUrl:"",featureGroupName:"",ajaxActionsUrl:"",popupId:"",title:"",content:"",showDemoButton:true,init:function(t){if(typeof t=="object"){this.signedParameters=t.signedParameters;this.componentName=t.componentName;this.licenseButtonText=t.B24_LICENSE_BUTTON_TEXT||"";this.trialButtonText=t.B24_TRIAL_BUTTON_TEXT||"";this.showFullDemoButton=t.IS_FULL_DEMO_EXISTS=="Y"?"Y":"N";this.hostName=t.HOST_NAME;this.ajaxUrl=t.AJAX_URL;this.licenseUrl=t.LICENSE_ALL_PATH;this.demoUrl=t.LICENSE_DEMO_PATH;this.featureGroupName=t.FEATURE_GROUP_NAME||"";this.ajaxActionsUrl=t.AJAX_ACTIONS_URL||"";this.featureTrialSuccessText=t.B24_FEATURE_TRIAL_SUCCESS_TEXT||""}},replaceTariffTfPrice:function(){BX.ajax.runComponentAction(this.componentName,"getTariffTfPrice",{signedParameters:this.signedParameters,mode:"ajax",data:{}}).then(function(t){this.content=this.content.replace("#TF_PRICE#",t.data);this.renderPopup()}.bind(this),function(t){this.renderPopup()}.bind(this))},show:function(t,e,o,i){if(!t)return;this.popupId=t;this.title=e||"";this.content=o||"";if(i!==false)i=true;this.showDemoButton=i;if(BX.type.isNotEmptyString(this.content)&&this.content.indexOf("#TF_PRICE#")!==-1){this.replaceTariffTfPrice()}else{this.renderPopup()}},renderPopup:function(){var t=[new BX.PopupWindowButton({text:this.licenseButtonText,className:"popup-window-button-create",events:{click:BX.proxy(function(){BX.ajax.post(this.ajaxUrl,{popupId:this.popupId,action:"tariff",host:this.hostName},BX.proxy(function(){top.location.href=this.licenseUrl},this))},this)}})];if(this.showFullDemoButton=="Y"&&this.showDemoButton){t.push(new BX.PopupWindowButtonLink({text:this.trialButtonText,className:"popup-window-button-link-cancel",events:{click:BX.proxy(function(){BX.ajax.post(this.ajaxUrl,{popupId:this.popupId,action:"demo",host:this.hostName},BX.proxy(function(){top.location.href=this.demoUrl},this))},this)}}))}else if(this.featureGroupName){t.push(new BX.PopupWindowButtonLink({text:this.trialButtonText,className:"popup-window-button-link-cancel",events:{click:BX.proxy(function(){BX.ajax({method:"POST",dataType:"json",url:this.ajaxActionsUrl,data:{action:"setFeatureTrial",sessid:BX.bitrix_sessid(),featureGroupName:this.featureGroupName},onsuccess:BX.proxy(function(t){if(t.error)var e=t.error;else if(t.success)e=this.featureTrialSuccessText;if(e){BX.PopupWindowManager.create("b24InfoPopupFeature",null,{content:BX.create("div",{html:e,attrs:{style:"padding:10px"}}),closeIcon:true}).show()}},this)});BX.ajax.post(this.ajaxUrl,{popupId:this.popupId,action:"demoFeature",host:this.hostName},function(){})},this)}}))}BX.PopupWindowManager.create("b24InfoPopup"+this.popupId,null,{titleBar:this.title,content:BX.create("div",{props:{className:"hide-features-popup-wrap"},children:[BX.create("div",{props:{className:"hide-features-popup"},children:[BX.create("div",{props:{className:"hide-features-pic"},children:[BX.create("div",{props:{className:"hide-features-pic-round"}})]}),BX.type.isDomNode(this.content)?BX.create("div",{props:{className:"hide-features-text"},children:[this.content]}):BX.create("div",{props:{className:"hide-features-text"},html:this.content})]})]}),closeIcon:true,lightShadow:true,offsetLeft:100,overlay:true,buttons:t,events:{onPopupClose:BX.proxy(function(){BX.ajax.post(this.ajaxUrl,{popupId:this.popupId,action:"close",host:this.hostName},function(){})},this)}}).show()}}})();
//# sourceMappingURL=script.map.js