var waitDiv=null;var waitPopup=null;var waitTimeout=null;var waitTime=500;function __SASSetAdmin(){__SASShowWait();BX.ajax({url:"/bitrix/components/bitrix/socialnetwork.admin.set/ajax.php",method:"POST",dataType:"json",data:{ACTION:"SET",sessid:BX.bitrix_sessid(),site:BX.util.urlencode(BX.message("SASSiteId"))},onsuccess:function(e){__SASProcessAJAXResponse(e)}})}function __SASProcessAJAXResponse(e){if(e["SUCCESS"]!="undefined"&&e["SUCCESS"]=="Y"){BX.reload();return false}else if(e["ERROR"]!="undefined"&&e["ERROR"].length>0){if(e["ERROR"].indexOf("SESSION_ERROR",0)===0){__SASShowError(BX.message("SASErrorSessionWrong"));BX.reload()}else if(e["ERROR"].indexOf("CURRENT_USER_NOT_ADMIN",0)===0){__SASShowError(BX.message("SASErrorNotAdmin"));return false}else if(e["ERROR"].indexOf("CURRENT_USER_NOT_AUTH",0)===0){__SASShowError(BX.message("SASErrorCurrentUserNotAuthorized"));return false}else if(e["ERROR"].indexOf("SONET_MODULE_NOT_INSTALLED",0)===0){__SASShowError(BX.message("SASErrorModuleNotInstalled"));return false}else{__SASShowError(e["ERROR"]);return false}}}function __SASShowError(e){__SASCloseWait();var t=new BX.PopupWindow("sas-error"+Math.random(),window,{autoHide:true,lightShadow:false,zIndex:2,content:BX.create("DIV",{props:{className:"sonet-adminset-error-text-block"},html:e}),closeByEsc:true,closeIcon:true});t.show()}function __SASShowWait(e){if(e!==0){return waitTimeout=setTimeout(function(){__SASShowWait(0)},50)}if(!waitPopup){waitPopup=new BX.PopupWindow("sas_wait",window,{autoHide:true,lightShadow:true,zIndex:2,content:BX.create("DIV",{props:{className:"sonet-adminset-wait-cont"},children:[BX.create("DIV",{props:{className:"sonet-adminset-wait-icon"}}),BX.create("DIV",{props:{className:"sonet-adminset-wait-text"},html:BX.message("SASWaitTitle")})]})})}else waitPopup.setBindElement(window);waitPopup.show()}function __SASCloseWait(){if(waitTimeout){clearTimeout(waitTimeout);waitTimeout=null}if(waitPopup)waitPopup.close()}