this.BX=this.BX||{};(function(e,s,a,l,t,i,r,o,b,n,c,d,p,v,h,u,P){"use strict";const L=Object.freeze({continue:"continue_text",cancel:"cancel",repeat:"repeat",save:"save",makeLonger:"make_longer",makeShorter:"make_shorter",summary:"summarize",explain:"explain",translate:"translate",todo:"todo",improve:"improve",correctMistakes:"correct_mistakes",replace:"replace",addBelow:"add_below",edit:"edit",close:"close",copy:"copy",feedback:"feedback"});class F{static getMenuItems(e){throw new Error("You must override method: getMenuItems")}}class H{static getMenuItems(e){const{engines:s,selectedEngineCode:a,canEditSettings:l=false}=e;const t={text:P.Loc.getMessage("AI_COPILOT_COMMAND_CONNECT_AI"),disabled:true,icon:u.Actions.PLUS_50};let i=[...B(s,a),t,{separator:true},{code:"about_open_copilot",text:P.Loc.getMessage("AI_COPILOT_MENU_ITEM_ABOUT_COPILOT"),icon:u.Main.INFO},f()];if(l){i=[...i,{code:"ai_settings",text:P.Loc.getMessage("AI_COPILOT_MENU_ITEM_AI_SETTINGS"),icon:u.Actions.SETTINGS_4,href:"/settings/configs/?page=ai"}]}return i}}function B(e,s){return e.map((e=>({code:e.code,text:e.title,icon:u.Main.ROBOT,selected:s===e.code})))}function f(){return{code:"market",href:"/market/collection/ai_provider_partner_crm/",text:P.Loc.getMessage("AI_COPILOT_SEARCH_IN_MARKET"),icon:u.Main.MARKET_1,arrow:false}}class y extends F{static getMenuItems(e){const{prompts:s,engines:a,selectedEngineCode:l,canEditSettings:t=false}=e;return[...g(s),...m(a,l,t),{code:L.feedback,text:P.Loc.getMessage("AI_COPILOT_MENU_ITEM_AI_FEEDBACK"),icon:u.Main.FEEDBACK}]}}function g(e){return e.map((e=>({code:e.code,text:e.title,children:g(e.children||[]),separator:e.separator,title:e.title,icon:e.icon,section:e.section}))).filter((e=>e.code!=="zero_prompt"))}function m(e,s,a=false){return[{separator:true,title:P.Loc.getMessage("AI_COPILOT_PROVIDER_MENU_SECTION"),text:P.Loc.getMessage("AI_COPILOT_PROVIDER_MENU_SECTION")},{code:"provider",text:P.Loc.getMessage("AI_COPILOT_MENU_ITEM_OPEN_COPILOT"),children:H.getMenuItems({engines:e,selectedEngineCode:s,canEditSettings:a}),icon:u.Main.COPILOT_AI}]}let O=e=>e,w;var _=babelHelpers.classPrivateFieldLooseKey("container");var C=babelHelpers.classPrivateFieldLooseKey("rawResult");class I{constructor(){Object.defineProperty(this,_,{writable:true,value:void 0});Object.defineProperty(this,C,{writable:true,value:void 0})}render(){babelHelpers.classPrivateFieldLooseBase(this,_)[_]=P.Tag.render(w||(w=O`<div class="ai__copilot-result"></div>`));babelHelpers.classPrivateFieldLooseBase(this,C)[C]="";return babelHelpers.classPrivateFieldLooseBase(this,_)[_]}addResult(e){babelHelpers.classPrivateFieldLooseBase(this,C)[C]=e;babelHelpers.classPrivateFieldLooseBase(this,_)[_].innerHTML+=String(P.Text.encode(e).replaceAll(/(\r\n|\r|\n)/g,"<br>"))}clearResult(){babelHelpers.classPrivateFieldLooseBase(this,C)[C]="";babelHelpers.classPrivateFieldLooseBase(this,_)[_].innerHTML=""}getResult(){return babelHelpers.classPrivateFieldLooseBase(this,C)[C]}}let k=e=>e,M;const E=e=>{const s=e.target;const a=e.text;return new n.Popup({content:P.Tag.render(M||(M=k`<div style="padding-right: 20px;">${0}</div>`),a),darkMode:true,borderRadius:"4px",animation:"fading-slide",autoHide:true,events:{onPopupShow:j(s)}})};const j=e=>s=>{const a=P.Dom.getPosition(e);const l=P.Dom.getPosition(s.getPopupContainer());const t=n.Popup.getOption("angleLeftOffset");s.setAngle({offset:l.width/2-a.width/2-4});s.setBindElement({left:a.left-l.width/2+a.width/2+t,top:a.bottom});s.adjustPosition({forceBindPosition:true,forceLeft:true,forceTop:true})};var K=babelHelpers.classPrivateFieldLooseKey("popup");class T{constructor(e){Object.defineProperty(this,K,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,K)[K]=E(e)}static addHintOnTargetHover(e){const s=E(e);const a=e.target;P.bind(a,"mouseenter",(()=>{s.show()}));P.bind(a,"mouseleave",(()=>{s.close()}))}show(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,K)[K])==null?void 0:e.show()}hide(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,K)[K])==null?void 0:e.close()}isShown(){var e;return Boolean((e=babelHelpers.classPrivateFieldLooseBase(this,K)[K])==null?void 0:e.isShown())}}var x="18";var A="5.9.6";var S=60;var D=0;var R=539;var N=210;var W=210;var $=0;var z=[];var U=[{nm:"[FRAME] 18 - Null / left-star - Null / left-star / right-star - Null / right-star / round - Null / round / Ellipse 2 - Null / Ellipse 2 - Stroke",fr:60,id:"lo8h9rmzawnjrpxsxm9",layers:[{ty:3,ddd:0,ind:4,hd:false,nm:"18 - Null",ks:{a:{a:0,k:[0,0]},o:{a:0,k:100},p:{a:0,k:[0,0]},r:{a:0,k:0},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},st:0,ip:0,op:540,bm:0,sr:1},{ty:3,ddd:0,ind:5,hd:false,nm:"left-star - Null",parent:4,ks:{a:{a:0,k:[37.7244,37.5291]},o:{a:0,k:100},p:{a:0,k:[95.78874400000001,95.16759099999999]},r:{a:0,k:0},s:{a:0,k:[101,101]},sk:{a:0,k:0},sa:{a:0,k:0}},st:0,ip:0,op:540,bm:0,sr:1},{ty:4,ddd:0,ind:6,hd:false,nm:"left-star",parent:5,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},st:0,ip:0,op:540,bm:0,sr:1,shapes:[{ty:"gr",nm:"Group",hd:false,np:3,it:[{ty:"sh",nm:"Path",hd:false,ks:{a:1,k:[{t:25.89,s:[{c:true,v:[[39.4485,.9376],[36.0004,.9376],[29.4602,18.5122],[18.5993,29.3117],[.9248,35.8149],[.9248,39.2435],[18.5994,45.7467],[29.4603,56.5462],[36.0005,74.1208],[39.4486,74.1208],[45.9888,56.5462],[56.8497,45.7467],[74.5243,39.2435],[74.5243,35.8149],[56.8498,29.3117],[45.9889,18.5122],[39.4485,.9376]],i:[[0,0],[.5922,-1.5914],[0,0],[5.0318,-1.8514],[0,0],[-1.6004,-.5889],[0,0],[-1.8619,-5.0033],[0,0],[-.5922,1.5914],[0,0],[-5.0318,1.8514],[0,0],[1.6004,.5889],[0,0],[1.8619,5.0033],[0,0]],o:[[-.5922199999999975,-1.5914],[0,0],[-1.8619200000000014,5.003299999999999],[0,0],[-1.60045,.58887],[0,0],[5.031760000000002,1.851390000000002],[0,0],[.5922199999999975,1.591399999999993],[0,0],[1.8619199999999978,-5.003300000000003],[0,0],[1.600449999999995,-.58887],[0,0],[-5.031770000000002,-1.8513899999999985],[0,0],[0,0]]}],o:{x:[.3],y:[0]},i:{x:[1],y:[1]}},{t:145.224,s:[{c:true,v:[[38.4952,21.1678],[36.9535,21.1678],[34.0294,29.026],[29.1734,33.8548],[21.271,36.7626],[21.271,38.2956],[29.1734,41.2034],[34.0294,46.0322],[36.9536,53.8904],[38.4953,53.8904],[41.4194,46.0322],[46.2754,41.2034],[54.1778,38.2956],[54.1778,36.7626],[46.2754,33.8548],[41.4194,29.026],[38.4952,21.1678]],i:[[0,0],[.2648,-.7116],[0,0],[2.2497,-.8278],[0,0],[-.7156,-.2633],[0,0],[-.8325,-2.2371],[0,0],[-.2648,.7116],[0,0],[-2.2497,.8278],[0,0],[.7156,.2633],[0,0],[.8325,2.2371],[0,0]],o:[[-.26478999999999786,-.7115700000000018],[0,0],[-.8324799999999968,2.2371499999999997],[0,0],[-.7155699999999996,.263300000000001],[0,0],[2.2497299999999996,.8278200000000027],[0,0],[.26478999999999786,.7115700000000018],[0,0],[.8324799999999968,-2.2371499999999997],[0,0],[.7155699999999996,-.263300000000001],[0,0],[-2.2497299999999996,-.8278200000000027],[0,0],[0,0]]}],o:{x:[.3],y:[0]},i:{x:[1],y:[1]}},{t:245.88,s:[{c:true,v:[[39.3124,3.8283],[36.1365,3.8283],[30.1127,20.0145],[20.1092,29.9608],[3.83,35.9502],[3.83,39.1079],[20.1092,45.0973],[30.1127,55.0436],[36.1366,71.2297],[39.3125,71.2297],[45.3363,55.0435],[55.3398,45.0972],[71.619,39.1078],[71.619,35.9501],[55.3398,29.9607],[45.3363,20.0144],[39.3124,3.8283]],i:[[0,0],[.5455,-1.4657],[0,0],[4.6345,-1.7051],[0,0],[-1.4741,-.5423],[0,0],[-1.7149,-4.608],[0,0],[-.5455,1.4657],[0,0],[-4.6345,1.7051],[0,0],[1.4741,.5423],[0,0],[1.7149,4.608],[0,0]],o:[[-.5454700000000017,-1.4656800000000003],[0,0],[-1.714929999999999,4.608029999999999],[0,0],[-1.4741,.542349999999999],[0,0],[4.634520000000002,1.705129999999997],[0,0],[.5454700000000017,1.465680000000006],[0,0],[1.7149300000000025,-4.608029999999999],[0,0],[1.4740999999999929,-.542349999999999],[0,0],[-4.634520000000002,-1.7051300000000005],[0,0],[0,0]]}],o:{x:[.3],y:[0]},i:{x:[1],y:[1]}},{t:356.178,s:[{c:true,v:[[38.4728,21.6471],[36.9761,21.6471],[34.1372,29.2751],[29.4227,33.9624],[21.7506,36.785],[21.7506,38.2731],[29.4228,41.0957],[34.1373,45.7831],[36.9763,53.4111],[38.4731,53.4111],[41.3121,45.7831],[46.0266,41.0958],[53.6988,38.2732],[53.6988,36.7851],[46.0266,33.9625],[41.3121,29.2751],[38.4728,21.6471]],i:[[0,0],[.2571,-.6907],[0,0],[2.1842,-.8036],[0,0],[-.6947,-.2556],[0,0],[-.8082,-2.1716],[0,0],[-.2571,.6907],[0,0],[-2.1842,.8036],[0,0],[.6947,.2556],[0,0],[.8082,2.1716],[0,0]],o:[[-.2570699999999988,-.6907199999999989],[0,0],[-.8082199999999986,2.1716000000000015],[0,0],[-.6947200000000002,.255589999999998],[0,0],[2.1841800000000013,.8035700000000006],[0,0],[.2570699999999988,.6907199999999989],[0,0],[.8082199999999986,-2.171599999999998],[0,0],[.6947199999999967,-.255589999999998],[0,0],[-2.184179999999998,-.8035700000000006],[0,0],[0,0]]}],o:{x:[.3],y:[0]},i:{x:[1],y:[1]}},{t:474.312,s:[{c:true,v:[[39.4485,.9397],[36.0004,.9397],[29.4602,18.5132],[18.5993,29.3121],[.9248,35.8149],[.9248,39.2433],[18.5994,45.7461],[29.4603,56.545],[36.0005,74.1185],[39.4486,74.1185],[45.9888,56.545],[56.8497,45.7462],[74.5243,39.2434],[74.5243,35.815],[56.8498,29.3122],[45.9889,18.5133],[39.4485,.9397]],i:[[0,0],[.5922,-1.5913],[0,0],[5.0318,-1.8513],[0,0],[-1.6004,-.5888],[0,0],[-1.8619,-5.003],[0,0],[-.5922,1.5913],[0,0],[-5.0318,1.8513],[0,0],[1.6004,.5888],[0,0],[1.8619,5.003],[0,0]],o:[[-.5922199999999975,-1.59131],[0,0],[-1.8619200000000014,5.00301],[0,0],[-1.60045,.5888399999999976],[0,0],[5.031760000000002,1.8512800000000027],[0,0],[.5922199999999975,1.591310000000007],[0,0],[1.8619199999999978,-5.003],[0,0],[1.600449999999995,-.5888399999999976],[0,0],[-5.031770000000002,-1.8512799999999991],[0,0],[0,0]]}]}]}},{ty:"fl",o:{a:0,k:100},c:{a:0,k:[1,1,1,1]},nm:"Fill",hd:false,r:2},{ty:"tr",a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}}]}]},{ty:3,ddd:0,ind:7,hd:false,nm:"right-star - Null",parent:4,ks:{a:{a:0,k:[21.7973,21.6844]},o:{a:0,k:100},p:{a:0,k:[128.4094,121.8898]},r:{a:0,k:0},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},st:0,ip:0,op:540,bm:0,sr:1},{ty:4,ddd:0,ind:8,hd:false,nm:"right-star",parent:7,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},st:0,ip:0,op:540,bm:0,sr:1,shapes:[{ty:"gr",nm:"Group",hd:false,np:3,it:[{ty:"sh",nm:"Path",hd:false,ks:{a:1,k:[{t:66.27,s:[{c:true,v:[[22.6367,3.8608],[20.958,3.8608],[17.774,12.4213],[12.4865,17.6817],[3.8818,20.8494],[3.8818,22.5195],[12.4865,25.6872],[17.774,30.9476],[20.958,39.5081],[22.6367,39.5081],[25.8207,30.9476],[31.1083,25.6872],[39.713,22.5195],[39.713,20.8495],[31.1083,17.6818],[25.8208,12.4214],[22.6367,3.8608]],i:[[0,0],[.2883,-.7752],[0,0],[2.4497,-.9018],[0,0],[-.7792,-.2868],[0,0],[-.9065,-2.4371],[0,0],[-.2883,.7752],[0,0],[-2.4497,.9018],[0,0],[.7792,.2868],[0,0],[.9065,2.4371],[0,0]],o:[[-.2883199999999988,-.7751600000000001],[0,0],[-.9064599999999992,2.4370899999999995],[0,0],[-.7791700000000001,.28684000000000154],[0,0],[2.4496800000000007,.9018100000000011],[0,0],[.2883199999999988,.7751700000000028],[0,0],[.9064599999999992,-2.4370900000000013],[0,0],[.7791599999999974,-.28684000000000154],[0,0],[-2.4496800000000007,-.9018100000000011],[0,0],[0,0]]}],o:{x:[0],y:[0]},i:{x:[0],y:[1]}},{t:156.072,s:[{c:true,v:[[23.2285,-8.7091],[20.3661,-8.7091],[14.9369,5.8887],[5.9209,14.8589],[-8.7513,20.2606],[-8.7513,23.1084],[5.9209,28.5101],[14.9369,37.4804],[20.3661,52.0782],[23.2285,52.0782],[28.6577,37.4805],[37.6737,28.5103],[52.3459,23.1086],[52.3459,20.2608],[37.6737,14.8591],[28.6577,5.8889],[23.2285,-8.7091]],i:[[0,0],[.4916,-1.3218],[0,0],[4.177,-1.5378],[0,0],[-1.3286,-.4891],[0,0],[-1.5456,-4.1558],[0,0],[-.4916,1.3218],[0,0],[-4.177,1.5378],[0,0],[1.3286,.4891],[0,0],[1.5456,4.1558],[0,0]],o:[[-.49162000000000106,-1.32184],[0,0],[-1.5456400000000006,4.155840000000001],[0,0],[-1.3285900000000002,.4891299999999994],[0,0],[4.17703,1.5378000000000007],[0,0],[.49162000000000106,1.3218499999999977],[0,0],[1.5456399999999988,-4.155839999999998],[0,0],[1.3285699999999991,-.4891299999999994],[0,0],[-4.177030000000002,-1.5378000000000007],[0,0],[0,0]]}],o:{x:[0],y:[0]},i:{x:[0],y:[1]}},{t:283.854,s:[{c:true,v:[[22.5686,5.3037],[21.026,5.3037],[18.1001,13.1712],[13.2413,18.0057],[5.3343,20.9169],[5.3343,22.4517],[13.2413,25.3629],[18.1001,30.1974],[21.026,38.0649],[22.5686,38.0649],[25.4945,30.1974],[30.3533,25.3629],[38.2603,22.4517],[38.2603,20.9169],[30.3533,18.0057],[25.4945,13.1712],[22.5686,5.3037]],i:[[0,0],[.2649,-.7124],[0,0],[2.251,-.8288],[0,0],[-.716,-.2636],[0,0],[-.833,-2.2398],[0,0],[-.2649,.7124],[0,0],[-2.251,.8288],[0,0],[.716,.2636],[0,0],[.833,2.2398],[0,0]],o:[[-.2649399999999993,-.7124100000000002],[0,0],[-.8329599999999999,2.2398000000000007],[0,0],[-.7159899999999997,.2636199999999995],[0,0],[2.251050000000001,.8288000000000011],[0,0],[.2649399999999993,.7124099999999984],[0,0],[.8329599999999999,-2.239799999999999],[0,0],[.7159800000000018,-.2636199999999995],[0,0],[-2.2510499999999993,-.8288000000000011],[0,0],[0,0]]}],o:{x:[0],y:[0]},i:{x:[0],y:[1]}},{t:379.08,s:[{c:true,v:[[23.233,-8.8011],[20.3615,-8.8011],[14.9151,5.8409],[5.8706,14.8383],[-8.8481,20.2563],[-8.8481,23.1128],[5.8706,28.5308],[14.9152,37.5282],[20.3616,52.1701],[23.2331,52.1701],[28.6795,37.5282],[37.7241,28.5308],[52.4428,23.1128],[52.4428,20.2563],[37.7241,14.8383],[28.6795,5.8409],[23.233,-8.8011]],i:[[0,0],[.4932,-1.3258],[0,0],[4.1903,-1.5425],[0,0],[-1.3328,-.4906],[0,0],[-1.5505,-4.1684],[0,0],[-.4932,1.3259],[0,0],[-4.1903,1.5425],[0,0],[1.3328,.4906],[0,0],[1.5505,4.1684],[0,0]],o:[[-.49317999999999884,-1.3258399999999995],[0,0],[-1.5505399999999998,4.16842],[0,0],[-1.3328000000000007,.4906100000000002],[0,0],[4.19027,1.5424499999999988],[0,0],[.49317999999999884,1.3258500000000026],[0,0],[1.5505400000000016,-4.168419999999998],[0,0],[1.3327799999999996,-.4906100000000002],[0,0],[-4.190269999999998,-1.5424500000000005],[0,0],[0,0]]}],o:{x:[0],y:[0]},i:{x:[0],y:[1]}},{t:472.04999999999995,s:[{c:true,v:[[22.6367,3.8608],[20.958,3.8608],[17.774,12.4213],[12.4865,17.6817],[3.8818,20.8494],[3.8818,22.5195],[12.4865,25.6872],[17.774,30.9476],[20.958,39.5081],[22.6367,39.5081],[25.8207,30.9476],[31.1083,25.6872],[39.713,22.5195],[39.713,20.8495],[31.1083,17.6818],[25.8208,12.4214],[22.6367,3.8608]],i:[[0,0],[.2883,-.7752],[0,0],[2.4497,-.9018],[0,0],[-.7792,-.2868],[0,0],[-.9065,-2.4371],[0,0],[-.2883,.7752],[0,0],[-2.4497,.9018],[0,0],[.7792,.2868],[0,0],[.9065,2.4371],[0,0]],o:[[-.2883199999999988,-.7751600000000001],[0,0],[-.9064599999999992,2.4370899999999995],[0,0],[-.7791700000000001,.28684000000000154],[0,0],[2.4496800000000007,.9018100000000011],[0,0],[.2883199999999988,.7751700000000028],[0,0],[.9064599999999992,-2.4370900000000013],[0,0],[.7791599999999974,-.28684000000000154],[0,0],[-2.4496800000000007,-.9018100000000011],[0,0],[0,0]]}]}]}},{ty:"fl",o:{a:0,k:100},c:{a:0,k:[1,1,1,1]},nm:"Fill",hd:false,r:2},{ty:"tr",a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}}]}]},{ty:3,ddd:0,ind:9,hd:false,nm:"round - Null",parent:4,ks:{a:{a:0,k:[0,0]},o:{a:0,k:100},p:{a:0,k:[42.3225,39.1459]},r:{a:0,k:0},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},st:0,ip:0,op:540,bm:0,sr:1},{ty:4,ddd:0,ind:10,hd:false,nm:"round",parent:9,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},st:0,ip:0,op:540,bm:0,sr:1,shapes:[{ty:"gr",nm:"Group",hd:false,np:3,it:[{ty:"sh",nm:"Path",hd:false,ks:{a:0,k:{c:true,v:[[65.2256,129.7757],[130.4512,64.8878],[65.2256,-1e-4],[0,64.8878],[65.2256,129.7757],[65.2256,129.7757]],i:[[0,0],[0,35.8366],[36.0231,0],[0,-35.8366],[-36.0231,0],[0,0]],o:[[36.023129999999995,0],[0,-35.83657],[-36.02312,0],[0,35.836569999999995],[0,0],[0,0]]}}},{ty:"fl",o:{a:0,k:100},c:{a:0,k:[.5764705882352941,.3568627450980392,.9254901960784314,1]},nm:"Fill",hd:false,r:2},{ty:"tr",a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}}]}]},{ty:3,ddd:0,ind:11,hd:false,nm:"Ellipse 2 - Null",parent:4,ks:{a:{a:0,k:[91.5,91.5]},o:{a:0,k:100},p:{a:0,k:[106.27800025906815,104.90813283170486]},r:{a:1,k:[{t:107.532,s:[-179],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:227.298,s:[-70],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:360.204,s:[-104.87],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:442.95000000000005,s:[17.67],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:537,s:[181]}]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},st:0,ip:0,op:540,bm:0,sr:1},{ddd:0,ind:12,hd:false,nm:"Ellipse 2 - Stroke",parent:11,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},st:0,ip:0,op:540,bm:0,sr:1,ty:4,shapes:[{ty:"gr",nm:"Group",hd:false,np:3,it:[{ty:"sh",nm:"Path",hd:false,ks:{a:0,k:{c:true,v:[[183,91.5],[91.5,183],[0,91.5],[91.5,0],[183,91.5],[183,91.5]],i:[[0,0],[50.5355,0],[0,50.5355],[-50.5355,0],[0,-50.5355],[0,0]],o:[[0,50.53550000000001],[-50.5355,0],[0,-50.5355],[50.53550000000001,0],[0,0],[0,0]]}}},{ty:"st",o:{a:0,k:100},w:{a:0,k:22},c:{a:0,k:[.5764705882352941,.3568627450980392,.9254901960784314,1]},ml:4,lc:2,lj:2,nm:"Stroke",hd:false,d:[{n:"o",nm:"Offset",v:{a:0,k:60}},{n:"d",nm:"Dash",v:{a:1,k:[{t:6.702,s:[277],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:155.184,s:[133.4122],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]}},{t:226.644,s:[133.4122],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:294.36600000000004,s:[133],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:460.524,s:[155],o:{x:[.42],y:[0]},i:{x:[.58],y:[1]}},{t:531.972,s:[277]}]}},{n:"g",nm:"Gap",v:{a:1,k:[{t:6.6,s:[90],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:117.576,s:[80],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:226.644,s:[86],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:320.694,s:[56],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]}},{t:399.072,s:[56],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:507.528,s:[90]}]}}]},{ty:"tr",a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}}]},{ty:"tm",s:{a:0,k:0},e:{a:0,k:100},o:{a:0,k:0},m:1},{ty:"gr",nm:"Group",hd:false,np:3,it:[{ty:"rc",nm:"Rectangle",hd:false,p:{a:0,k:[102.5,102.5]},s:{a:0,k:[410,410]},r:{a:0,k:0}},{ty:"fl",o:{a:0,k:0},c:{a:0,k:[0,1,0,1]},nm:"Fill",hd:false,r:1},{ty:"tr",a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}}]}]}]}];var G=[{ddd:0,ind:1,ty:0,nm:"18",refId:"lo8h9rmzawnjrpxsxm9",sr:1,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},ao:0,w:210,h:210,ip:0,op:540,st:0,hd:false,bm:0}];var X={a:"",d:"",tc:"",g:"Aninix"};var V={nm:x,v:A,fr:S,ip:D,op:R,w:N,h:W,ddd:$,markers:z,assets:U,layers:G,meta:X};let q=e=>e,Y,Z,J;var Q=babelHelpers.classPrivateFieldLooseKey("container");var ee=babelHelpers.classPrivateFieldLooseKey("stopRecordingButton");var se=babelHelpers.classPrivateFieldLooseKey("startRecordingButton");var ae=babelHelpers.classPrivateFieldLooseKey("disabled");var le=babelHelpers.classPrivateFieldLooseKey("initContainer");var te=babelHelpers.classPrivateFieldLooseKey("renderStartRecordingButton");var ie=babelHelpers.classPrivateFieldLooseKey("renderStopRecordingButton");var re=babelHelpers.classPrivateFieldLooseKey("enableStartRecordingButton");var oe=babelHelpers.classPrivateFieldLooseKey("disableStartRecordingButton");var be=babelHelpers.classPrivateFieldLooseKey("enableStopRecordingButton");var ne=babelHelpers.classPrivateFieldLooseKey("disableStopRecordingButton");class ce extends c.EventEmitter{constructor(e){super(e);Object.defineProperty(this,ne,{value:Le});Object.defineProperty(this,be,{value:Pe});Object.defineProperty(this,oe,{value:ue});Object.defineProperty(this,re,{value:he});Object.defineProperty(this,ie,{value:ve});Object.defineProperty(this,te,{value:pe});Object.defineProperty(this,le,{value:de});Object.defineProperty(this,Q,{writable:true,value:void 0});Object.defineProperty(this,ee,{writable:true,value:void 0});Object.defineProperty(this,se,{writable:true,value:void 0});Object.defineProperty(this,ae,{writable:true,value:void 0});this.setEventNamespace("AI:Copilot:VoiceButton");babelHelpers.classPrivateFieldLooseBase(this,ae)[ae]=false;babelHelpers.classPrivateFieldLooseBase(this,Q)[Q]=null}start(){P.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,Q)[Q],"--recording")}stop(){P.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,Q)[Q],"--recording")}enable(){babelHelpers.classPrivateFieldLooseBase(this,ae)[ae]=false;babelHelpers.classPrivateFieldLooseBase(this,re)[re]();babelHelpers.classPrivateFieldLooseBase(this,be)[be]()}disable(){babelHelpers.classPrivateFieldLooseBase(this,ae)[ae]=true;babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]();babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]()}isDisabled(){return babelHelpers.classPrivateFieldLooseBase(this,ae)[ae]}getContainer(){if(!babelHelpers.classPrivateFieldLooseBase(this,Q)[Q]){babelHelpers.classPrivateFieldLooseBase(this,le)[le]()}return babelHelpers.classPrivateFieldLooseBase(this,Q)[Q]}render(){return this.getContainer()}}function de(){babelHelpers.classPrivateFieldLooseBase(this,Q)[Q]=P.Tag.render(Y||(Y=q`
			<div class="ai__copilot-voice-input-btn-container">
				${0}
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,te)[te](),babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]())}function pe(){const e=new u.Icon({icon:u.Main.MICROPHONE_ON,size:20});babelHelpers.classPrivateFieldLooseBase(this,se)[se]=P.Tag.render(Z||(Z=q`
			<button
				class="ai__copilot-voice-input-btn --start"
			>
				${0}
			</button>
		`),e.render());babelHelpers.classPrivateFieldLooseBase(this,se)[se].disabled=babelHelpers.classPrivateFieldLooseBase(this,ae)[ae];P.bind(babelHelpers.classPrivateFieldLooseBase(this,se)[se],"click",(()=>{this.emit("start")}));return babelHelpers.classPrivateFieldLooseBase(this,se)[se]}function ve(){const e=new u.Icon({icon:u.Actions.STOP,size:17,color:getComputedStyle(document.body).getPropertyValue("--ui-color-on-primary")});babelHelpers.classPrivateFieldLooseBase(this,ee)[ee]=P.Tag.render(J||(J=q`
			<button
				class="ai__copilot-voice-input-btn --stop"
			>
				${0}
			</button>
		`),e.render());babelHelpers.classPrivateFieldLooseBase(this,ee)[ee].disabled=babelHelpers.classPrivateFieldLooseBase(this,ae)[ae];P.bind(babelHelpers.classPrivateFieldLooseBase(this,ee)[ee],"click",(()=>{this.emit("stop")}));return babelHelpers.classPrivateFieldLooseBase(this,ee)[ee]}function he(){if(babelHelpers.classPrivateFieldLooseBase(this,se)[se]){babelHelpers.classPrivateFieldLooseBase(this,se)[se].disabled=false}}function ue(){if(babelHelpers.classPrivateFieldLooseBase(this,se)[se]){babelHelpers.classPrivateFieldLooseBase(this,se)[se].disabled=true}}function Pe(){if(babelHelpers.classPrivateFieldLooseBase(this,ee)[ee]){babelHelpers.classPrivateFieldLooseBase(this,ee)[ee].disabled=false}}function Le(){if(babelHelpers.classPrivateFieldLooseBase(this,ee)[ee]){babelHelpers.classPrivateFieldLooseBase(this,ee)[ee].disabled=true}}let Fe=e=>e,He,Be,fe;var ye=babelHelpers.classPrivateFieldLooseKey("errors");var ge=babelHelpers.classPrivateFieldLooseKey("detailedErrorInfoPopup");var me=babelHelpers.classPrivateFieldLooseKey("initDetailerErrorInfoPopup");var Oe=babelHelpers.classPrivateFieldLooseKey("getDetailedErrorInfoPopupContent");class we{constructor(e){Object.defineProperty(this,Oe,{value:Ce});Object.defineProperty(this,me,{value:_e});Object.defineProperty(this,ye,{writable:true,value:void 0});Object.defineProperty(this,ge,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,ye)[ye]=e.errors}render(){const e=P.Tag.render(He||(He=Fe`
			<span class="ai__copilot_input-field-error-detail">
				${0}
			</span>
		`),P.Loc.getMessage("AI_COPILOT_ERROR_DETAIL"));P.bind(e,"click",(e=>{babelHelpers.classPrivateFieldLooseBase(this,me)[me]();babelHelpers.classPrivateFieldLooseBase(this,ge)[ge].setContent(babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe]());babelHelpers.classPrivateFieldLooseBase(this,ge)[ge].setBindElement(e.target);babelHelpers.classPrivateFieldLooseBase(this,ge)[ge].setOffset({offsetTop:5,offsetLeft:-20});babelHelpers.classPrivateFieldLooseBase(this,ge)[ge].show()}));return P.Tag.render(Be||(Be=Fe`
			<div class="ai__copilot_input-field-error">
				<span class="ai__copilot_input-field-error-title">
					${0} 
				</span>
			</div>
		`),P.Loc.getMessage("AI_COPILOT_ERROR"))}setErrors(e){babelHelpers.classPrivateFieldLooseBase(this,ye)[ye]=e}getErrors(){return babelHelpers.classPrivateFieldLooseBase(this,ye)[ye]}}function _e(){if(babelHelpers.classPrivateFieldLooseBase(this,ge)[ge]){return}babelHelpers.classPrivateFieldLooseBase(this,ge)[ge]=new n.Popup({id:"ai__copilot_error-popup",content:babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe](),darkMode:true,maxWidth:300,autoHide:true,closeByEsc:true,closeIcon:true,cacheable:true})}function Ce(){return P.Tag.render(fe||(fe=Fe`
			<div class="ai__copilot_error-popup-content">
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,ye)[ye][babelHelpers.classPrivateFieldLooseBase(this,ye)[ye].length-1].message)}let Ie=e=>e,ke;const Me=Object.freeze({});var Ee=babelHelpers.classPrivateFieldLooseKey("container");var je=babelHelpers.classPrivateFieldLooseKey("readonly");var Ke=babelHelpers.classPrivateFieldLooseKey("getPlaceholderText");class Te extends c.EventEmitter{constructor(e){super(e);Object.defineProperty(this,Ke,{value:xe});Object.defineProperty(this,Ee,{writable:true,value:void 0});Object.defineProperty(this,je,{writable:true,value:false});this.setEventNamespace("AI.Copilot.InputPlaceholder");babelHelpers.classPrivateFieldLooseBase(this,je)[je]=e.readonly===true}render(){babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee]=this.getContainer();return babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee]}getContainer(){if(!babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee]){const e=babelHelpers.classPrivateFieldLooseBase(this,Ke)[Ke]();babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee]=P.Tag.render(ke||(ke=Ie`
				<div class="ai_copilot_placeholder">
					<span>${0}</span>
				</div>
			`),e)}return babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee]}}function xe(){if(babelHelpers.classPrivateFieldLooseBase(this,je)[je]){return P.Loc.getMessage("AI_COPILOT_SELECT_COMMAND_BELOW")}return P.Loc.getMessage("AI_COPILOT_INPUT_START_PLACEHOLDER")}let Ae=e=>e,Se,De,Re;const Ne=Object.freeze({submit:"submit"});var We=babelHelpers.classPrivateFieldLooseKey("submitBtn");var $e=babelHelpers.classPrivateFieldLooseKey("container");var ze=babelHelpers.classPrivateFieldLooseKey("renderHotKeyTag");var Ue=babelHelpers.classPrivateFieldLooseKey("renderSubmitBtn");class Ge extends c.EventEmitter{constructor(e){super(e);Object.defineProperty(this,Ue,{value:Ve});Object.defineProperty(this,ze,{value:Xe});Object.defineProperty(this,We,{writable:true,value:void 0});Object.defineProperty(this,$e,{writable:true,value:void 0});this.setEventNamespace("AI:Copilot:SubmitBtn")}render(){babelHelpers.classPrivateFieldLooseBase(this,$e)[$e]=P.Tag.render(Se||(Se=Ae`
			<div
				class="ai__copilot_input-submit-btn-container"
			>
				${0}
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,ze)[ze](),babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue]());return babelHelpers.classPrivateFieldLooseBase(this,$e)[$e]}disable(){P.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,$e)[$e],"--disabled");babelHelpers.classPrivateFieldLooseBase(this,We)[We].disabled=true}enable(){P.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,$e)[$e],"--disabled");babelHelpers.classPrivateFieldLooseBase(this,We)[We].disabled=false}}function Xe(){const e=new u.Icon({size:20,icon:u.Actions.ARROW_TOP_2});return P.Tag.render(De||(De=Ae`
			<div class="ai__copilot_input-submit-hotkey">
				<div class="ai__copilot_input-submit-hotkey-icon">
					${0}
				</div>
				<div class="ai__copilot_input-submit-hotkey-text">Enter</div>
			</div>
		`),e.render())}function Ve(){const e=new u.Icon({size:18,icon:u.Actions.ARROW_TOP,color:"#fff"});babelHelpers.classPrivateFieldLooseBase(this,We)[We]=P.Tag.render(Re||(Re=Ae`
			<button class="ai__copilot_input-submit-btn">
				${0}
			</button>
		`),e.render());P.bind(babelHelpers.classPrivateFieldLooseBase(this,We)[We],"click",(e=>{this.emit(Ne.submit);e.preventDefault()}));return babelHelpers.classPrivateFieldLooseBase(this,We)[We]}const qe=Object.freeze({result:"result",start:"start",stop:"stop",error:"error"});var Ye=babelHelpers.classPrivateFieldLooseKey("speechRecognition");var Ze=babelHelpers.classPrivateFieldLooseKey("isRecording");var Je=babelHelpers.classPrivateFieldLooseKey("initSpeechRecognition");var Qe=babelHelpers.classPrivateFieldLooseKey("handleStartEvent");var es=babelHelpers.classPrivateFieldLooseKey("handleEndEvent");var ss=babelHelpers.classPrivateFieldLooseKey("handleErrorEvent");var as=babelHelpers.classPrivateFieldLooseKey("handleResultEvent");var ls=babelHelpers.classPrivateFieldLooseKey("getTextFromResults");let ts=e=>e,is,rs,os,bs,ns,cs,ds,ps;const vs=Object.freeze({submit:"submit",cancelLoading:"cancelLoading",focus:"focus",input:"input",goOutFromBottom:"goOutFromBottom",startRecording:"startRecording",stopRecording:"stopRecording",adjustHeight:"adjustHeight"});var hs=babelHelpers.classPrivateFieldLooseKey("textarea");var us=babelHelpers.classPrivateFieldLooseKey("container");var Ps=babelHelpers.classPrivateFieldLooseKey("isLoading");var Ls=babelHelpers.classPrivateFieldLooseKey("placeholder");var Fs=babelHelpers.classPrivateFieldLooseKey("errorContainer");var Hs=babelHelpers.classPrivateFieldLooseKey("inputError");var Bs=babelHelpers.classPrivateFieldLooseKey("textareaOldValue");var fs=babelHelpers.classPrivateFieldLooseKey("disableEnterAndArrows");var ys=babelHelpers.classPrivateFieldLooseKey("copilotLottieAnimation");var gs=babelHelpers.classPrivateFieldLooseKey("lottieIconContainer");var ms=babelHelpers.classPrivateFieldLooseKey("speechConverter");var Os=babelHelpers.classPrivateFieldLooseKey("submitBtn");var ws=babelHelpers.classPrivateFieldLooseKey("voiceButton");var _s=babelHelpers.classPrivateFieldLooseKey("readonly");var Cs=babelHelpers.classPrivateFieldLooseKey("setErrorIcon");var Is=babelHelpers.classPrivateFieldLooseKey("setInputIcon");var ks=babelHelpers.classPrivateFieldLooseKey("setIcon");var Ms=babelHelpers.classPrivateFieldLooseKey("getIconContainer");var Es=babelHelpers.classPrivateFieldLooseKey("renderLoader");var js=babelHelpers.classPrivateFieldLooseKey("renderErrorContainer");var Ks=babelHelpers.classPrivateFieldLooseKey("renderTextArea");var Ts=babelHelpers.classPrivateFieldLooseKey("handleKeyDownEvent");var xs=babelHelpers.classPrivateFieldLooseKey("isArrowKey");var As=babelHelpers.classPrivateFieldLooseKey("handleEnterKeyDownEvent");var Ss=babelHelpers.classPrivateFieldLooseKey("handleArrowKeyDownEvent");var Ds=babelHelpers.classPrivateFieldLooseKey("isCursorInTextareaEnd");var Rs=babelHelpers.classPrivateFieldLooseKey("renderPlaceholder");var Ns=babelHelpers.classPrivateFieldLooseKey("updateContainerClassname");var Ws=babelHelpers.classPrivateFieldLooseKey("renderInputIcon");var $s=babelHelpers.classPrivateFieldLooseKey("getLottieIconContainer");var zs=babelHelpers.classPrivateFieldLooseKey("renderErrorIcon");var Us=babelHelpers.classPrivateFieldLooseKey("renderSubmitButton");var Gs=babelHelpers.classPrivateFieldLooseKey("initVoiceButton");var Xs=babelHelpers.classPrivateFieldLooseKey("initDisabledVoiceButton");var Vs=babelHelpers.classPrivateFieldLooseKey("initEnabledVoiceButton");var qs=babelHelpers.classPrivateFieldLooseKey("initSubmitButton");var Ys=babelHelpers.classPrivateFieldLooseKey("initSpeechConverter");var Zs=babelHelpers.classPrivateFieldLooseKey("handleSpeechConverterStartEvent");var Js=babelHelpers.classPrivateFieldLooseKey("handleSpeechConverterErrorEvent");var Qs=babelHelpers.classPrivateFieldLooseKey("showErrorHintForVoiceButton");var ea=babelHelpers.classPrivateFieldLooseKey("handleSpeechConverterResultEvent");var sa=babelHelpers.classPrivateFieldLooseKey("handleSpeechConverterStopEvent");var aa=babelHelpers.classPrivateFieldLooseKey("setTextareaValue");var la=babelHelpers.classPrivateFieldLooseKey("adjustTextareaHeight");class ta extends c.EventEmitter{constructor(e={}){super(e);Object.defineProperty(this,la,{value:Ka});Object.defineProperty(this,aa,{value:ja});Object.defineProperty(this,sa,{value:Ea});Object.defineProperty(this,ea,{value:Ma});Object.defineProperty(this,Qs,{value:ka});Object.defineProperty(this,Js,{value:Ia});Object.defineProperty(this,Zs,{value:Ca});Object.defineProperty(this,Ys,{value:_a});Object.defineProperty(this,qs,{value:wa});Object.defineProperty(this,Vs,{value:Oa});Object.defineProperty(this,Xs,{value:ma});Object.defineProperty(this,Gs,{value:ga});Object.defineProperty(this,Us,{value:ya});Object.defineProperty(this,zs,{value:fa});Object.defineProperty(this,$s,{value:Ba});Object.defineProperty(this,Ws,{value:Ha});Object.defineProperty(this,Ns,{value:Fa});Object.defineProperty(this,Rs,{value:La});Object.defineProperty(this,Ds,{value:Pa});Object.defineProperty(this,Ss,{value:ua});Object.defineProperty(this,As,{value:ha});Object.defineProperty(this,xs,{value:va});Object.defineProperty(this,Ts,{value:pa});Object.defineProperty(this,Ks,{value:da});Object.defineProperty(this,js,{value:ca});Object.defineProperty(this,Es,{value:na});Object.defineProperty(this,Ms,{value:ba});Object.defineProperty(this,ks,{value:oa});Object.defineProperty(this,Is,{value:ra});Object.defineProperty(this,Cs,{value:ia});Object.defineProperty(this,hs,{writable:true,value:void 0});Object.defineProperty(this,us,{writable:true,value:void 0});Object.defineProperty(this,Ps,{writable:true,value:void 0});Object.defineProperty(this,Ls,{writable:true,value:void 0});Object.defineProperty(this,Fs,{writable:true,value:void 0});Object.defineProperty(this,Hs,{writable:true,value:void 0});Object.defineProperty(this,Bs,{writable:true,value:""});Object.defineProperty(this,fs,{writable:true,value:false});Object.defineProperty(this,ys,{writable:true,value:null});Object.defineProperty(this,gs,{writable:true,value:void 0});Object.defineProperty(this,ms,{writable:true,value:null});Object.defineProperty(this,Os,{writable:true,value:null});Object.defineProperty(this,ws,{writable:true,value:null});Object.defineProperty(this,_s,{writable:true,value:false});babelHelpers.classPrivateFieldLooseBase(this,_s)[_s]=e.readonly===true;babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps]=false;babelHelpers.classPrivateFieldLooseBase(this,Fs)[Fs]=null;babelHelpers.classPrivateFieldLooseBase(this,Hs)[Hs]=null;babelHelpers.classPrivateFieldLooseBase(this,ys)[ys]=null;babelHelpers.classPrivateFieldLooseBase(this,gs)[gs]=null;this.setEventNamespace("AI.Copilot.Input")}render(){babelHelpers.classPrivateFieldLooseBase(this,us)[us]=P.Tag.render(is||(is=ts`
			<div class="ai__copilot_input-field">
				<div ref="icon" class="ai__copilot_input-field-icon">
					${0}
				</div>
				${0}
				<div class="ai__copilot_input-field-content">
					${0}
					${0}
					${0}
				</div>
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,Ws)[Ws](),babelHelpers.classPrivateFieldLooseBase(this,Es)[Es](),babelHelpers.classPrivateFieldLooseBase(this,Ks)[Ks](),babelHelpers.classPrivateFieldLooseBase(this,Rs)[Rs](),babelHelpers.classPrivateFieldLooseBase(this,js)[js](),babelHelpers.classPrivateFieldLooseBase(this,Us)[Us]());babelHelpers.classPrivateFieldLooseBase(this,Ns)[Ns]();return babelHelpers.classPrivateFieldLooseBase(this,us)[us].root}setValue(e){babelHelpers.classPrivateFieldLooseBase(this,aa)[aa](e)}focus(){if(babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]){babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].focus();babelHelpers.classPrivateFieldLooseBase(this,fs)[fs]=false}}getContainer(){return babelHelpers.classPrivateFieldLooseBase(this,us)[us].root}clear(){var e;babelHelpers.classPrivateFieldLooseBase(this,aa)[aa]("",false);(e=babelHelpers.classPrivateFieldLooseBase(this,ws)[ws])==null?void 0:e.enable()}startGenerating(){babelHelpers.classPrivateFieldLooseBase(this,ys)[ys].play();this.clearErrors();this.enable();babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].disabled=true;babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps]=true;babelHelpers.classPrivateFieldLooseBase(this,aa)[aa]("",false);P.Dom.addClass(this.getContainer(),"--loading");P.Dom.removeClass(this.getContainer(),"--error")}finishGenerating(){babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].disabled=false;babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps]=false;babelHelpers.classPrivateFieldLooseBase(this,aa)[aa](babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs],false);P.Dom.removeClass(this.getContainer(),"--loading");setTimeout((()=>{babelHelpers.classPrivateFieldLooseBase(this,ys)[ys].stop()}),550)}stopRecording(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,ms)[ms])==null?void 0:e.stop()}setErrors(e){P.Dom.clean(babelHelpers.classPrivateFieldLooseBase(this,Fs)[Fs]);if(babelHelpers.classPrivateFieldLooseBase(this,Hs)[Hs]){babelHelpers.classPrivateFieldLooseBase(this,Hs)[Hs].setErrors(e)}else{babelHelpers.classPrivateFieldLooseBase(this,Hs)[Hs]=new we({errors:e})}babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs]();P.Dom.addClass(this.getContainer(),"--error");const s=babelHelpers.classPrivateFieldLooseBase(this,Hs)[Hs].render();P.Dom.append(s,babelHelpers.classPrivateFieldLooseBase(this,Fs)[Fs]);babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].disabled=true;requestAnimationFrame((()=>{babelHelpers.classPrivateFieldLooseBase(this,la)[la]()}))}clearErrors(){if(babelHelpers.classPrivateFieldLooseBase(this,Hs)[Hs]&&babelHelpers.classPrivateFieldLooseBase(this,Hs)[Hs].getErrors().length>0){babelHelpers.classPrivateFieldLooseBase(this,Hs)[Hs].setErrors([]);P.Dom.removeClass(this.getContainer(),"--error");babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].disabled=false;babelHelpers.classPrivateFieldLooseBase(this,Is)[Is]()}}enableEnterAndArrows(){babelHelpers.classPrivateFieldLooseBase(this,fs)[fs]=false}disableEnterAndArrows(){babelHelpers.classPrivateFieldLooseBase(this,fs)[fs]=true}disable(){P.Dom.addClass(this.getContainer(),"--disabled");P.Dom.attr(babelHelpers.classPrivateFieldLooseBase(this,hs)[hs],"disabled",true);P.Dom.style(this.getContainer(),"opacity",.7);this.disableEnterAndArrows()}enable(){P.Dom.removeClass(this.getContainer(),"--disabled");P.Dom.attr(babelHelpers.classPrivateFieldLooseBase(this,hs)[hs],"disabled",null);P.Dom.style(this.getContainer(),"opacity",1);this.enableEnterAndArrows()}isDisabled(){return babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].disabled}}function ia(){babelHelpers.classPrivateFieldLooseBase(this,ks)[ks](babelHelpers.classPrivateFieldLooseBase(this,zs)[zs]())}function ra(){babelHelpers.classPrivateFieldLooseBase(this,ks)[ks](babelHelpers.classPrivateFieldLooseBase(this,Ws)[Ws]())}function oa(e){if(e.className===babelHelpers.classPrivateFieldLooseBase(this,Ms)[Ms]().firstElementChild.className){return}P.bindOnce(babelHelpers.classPrivateFieldLooseBase(this,Ms)[Ms](),"transitionend",(()=>{babelHelpers.classPrivateFieldLooseBase(this,Ms)[Ms]().innerHTML="";P.Dom.append(e,babelHelpers.classPrivateFieldLooseBase(this,Ms)[Ms]());P.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,Ms)[Ms](),"opacity",1)}));P.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,Ms)[Ms](),"opacity",0)}function ba(){return babelHelpers.classPrivateFieldLooseBase(this,us)[us].icon}function na(){const e=P.Tag.render(rs||(rs=ts`
			<button class="ai__copilot_loader-cancel-btn">
				${0}
			</button>
		`),P.Loc.getMessage("AI_COPILOT_INPUT_LOADER_CANCEL"));P.bind(e,"click",(()=>{this.emit(vs.cancelLoading)}));return P.Tag.render(os||(os=ts`
			<div class="ai__copilot_loader">
				<div class="ai__copilot_loader-left">
					<div class="ai__copilot_loader-text">${0}</div>
					<div class="ai__copilot_loader-dot dot-flashing"></div>
				</div>
				${0}
			</div>
		`),P.Loc.getMessage("AI_COPILOT_INPUT_LOADER_TEXT"),e)}function ca(){babelHelpers.classPrivateFieldLooseBase(this,Fs)[Fs]=P.Tag.render(bs||(bs=ts`
			<div class="ai__copilot_input-field-error-container"></div>
		`));return babelHelpers.classPrivateFieldLooseBase(this,Fs)[Fs]}function da(){babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]=P.Tag.render(ns||(ns=ts`
			<textarea
				rows="1"
				class="ai__copilot_input"
			></textarea>
		`));P.bind(babelHelpers.classPrivateFieldLooseBase(this,hs)[hs],"focus",(()=>{this.emit(vs.focus)}));P.bind(babelHelpers.classPrivateFieldLooseBase(this,hs)[hs],"input",(e=>{babelHelpers.classPrivateFieldLooseBase(this,aa)[aa](e.target.value);if(babelHelpers.classPrivateFieldLooseBase(this,ms)[ms].isRecording()===false){if(e.target.value){babelHelpers.classPrivateFieldLooseBase(this,ws)[ws].disable()}else{babelHelpers.classPrivateFieldLooseBase(this,ws)[ws].enable()}}}));P.bind(babelHelpers.classPrivateFieldLooseBase(this,hs)[hs],"keydown",babelHelpers.classPrivateFieldLooseBase(this,Ts)[Ts].bind(this));const e=new MutationObserver((e=>{e.forEach((e=>{if(e.type==="attributes"&&e.attributeName==="disabled"){if(babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].disabled===true){P.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,hs)[hs],"z-index",-1)}else{P.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,hs)[hs],"z-index",1)}}}))}));e.observe(babelHelpers.classPrivateFieldLooseBase(this,hs)[hs],{attributes:true});return babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]}function pa(e){if((e.key==="Enter"||babelHelpers.classPrivateFieldLooseBase(this,xs)[xs](e.key))&&babelHelpers.classPrivateFieldLooseBase(this,fs)[fs]){e.preventDefault();return false}if(e.key==="Enter"){return babelHelpers.classPrivateFieldLooseBase(this,As)[As](e)}if(babelHelpers.classPrivateFieldLooseBase(this,xs)[xs](e.key)){return babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss](e)}babelHelpers.classPrivateFieldLooseBase(this,fs)[fs]=false;return true}function va(e){return e==="ArrowDown"||e==="ArrowUp"||e==="ArrowLeft"||e==="ArrowRight"}function ha(e){if(e.key==="Enter"){if(e.shiftKey||e.altKey||e.ctrlKey){const e=babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].selectionStart;const s=babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].value.slice(0,e);const a=babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].value.slice(e);babelHelpers.classPrivateFieldLooseBase(this,aa)[aa](`${s}\n${a}`);const l=s.length+1;babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].selectionStart=l;babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].selectionEnd=l}else if(e.repeat===false&&babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps]===false){this.emit(vs.submit)}e.preventDefault();return false}return true}function ua(e){if(e.key==="ArrowDown"&&babelHelpers.classPrivateFieldLooseBase(this,Ds)[Ds]()){babelHelpers.classPrivateFieldLooseBase(this,fs)[fs]=true;this.emit(vs.goOutFromBottom);return false}return true}function Pa(){const e=babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].value;const s=e.length;const a=babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].selectionEnd;return a>=s-1}function La(){babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls]=new Te({readonly:babelHelpers.classPrivateFieldLooseBase(this,_s)[_s]});P.bind(babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].getContainer(),"click",(()=>{babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].focus()}));return babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].render()}function Fa(){if(babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].value.length===0){P.Dom.addClass(this.getContainer(),"--show-placeholder")}else{P.Dom.removeClass(this.getContainer(),"--show-placeholder")}}function Ha(){return P.Tag.render(cs||(cs=ts`
			<div class="123123" style="width: 24px; height: 24px; position: relative;">
				<div class="ai__copilot_static-icon-wrapper">
					<div class="ai__copilot_static-icon"></div>
				</div>
				<div class="ai__copilot_loading-icon-wrapper">
					${0}
				</div>
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,$s)[$s]())}function Ba(){if(!babelHelpers.classPrivateFieldLooseBase(this,gs)[gs]){const e=21;babelHelpers.classPrivateFieldLooseBase(this,gs)[gs]=P.Tag.render(ds||(ds=ts`
				<div class="123" style="width: ${0}px; height: ${0}px;"></div>
			`),e,e);babelHelpers.classPrivateFieldLooseBase(this,ys)[ys]=r.Lottie.loadAnimation({container:babelHelpers.classPrivateFieldLooseBase(this,gs)[gs],renderer:"svg",animationData:V,autoplay:false})}return babelHelpers.classPrivateFieldLooseBase(this,gs)[gs]}function fa(){const e=new u.Icon({icon:u.Main.WARNING,size:24,color:"#FF5752"});return e.render()}function ya(){if(babelHelpers.classPrivateFieldLooseBase(this,_s)[_s]){return null}babelHelpers.classPrivateFieldLooseBase(this,Gs)[Gs]();babelHelpers.classPrivateFieldLooseBase(this,qs)[qs]();return P.Tag.render(ps||(ps=ts`
			<div class="ai__copilot_input-submit-block">
				${0}
				<div class="ai__copilot_input-submit-block-voice-btn">
					${0}
				</div>
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,Os)[Os].render(),babelHelpers.classPrivateFieldLooseBase(this,ws)[ws].render())}function ga(){babelHelpers.classPrivateFieldLooseBase(this,ws)[ws]=new ce;if(o.SpeechConverter.isBrowserSupport()===false){babelHelpers.classPrivateFieldLooseBase(this,Xs)[Xs]()}else{babelHelpers.classPrivateFieldLooseBase(this,Vs)[Vs]()}}function ma(){babelHelpers.classPrivateFieldLooseBase(this,ws)[ws].disable();T.addHintOnTargetHover({target:babelHelpers.classPrivateFieldLooseBase(this,ws)[ws].getContainer(),text:P.Loc.getMessage("AI_COPILOT_VOICE_INPUT_NOT_SUPPORT")})}function Oa(){babelHelpers.classPrivateFieldLooseBase(this,Ys)[Ys]();P.bind(babelHelpers.classPrivateFieldLooseBase(this,ws)[ws].getContainer(),"click",(()=>{if(babelHelpers.classPrivateFieldLooseBase(this,ws)[ws].isDisabled()||babelHelpers.classPrivateFieldLooseBase(this,ms)[ms].isRecording()){return}babelHelpers.classPrivateFieldLooseBase(this,ms)[ms].start()}));babelHelpers.classPrivateFieldLooseBase(this,ws)[ws].subscribe("stop",(()=>{babelHelpers.classPrivateFieldLooseBase(this,ms)[ms].stop();if(babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].value){babelHelpers.classPrivateFieldLooseBase(this,ws)[ws].disable()}}))}function wa(){babelHelpers.classPrivateFieldLooseBase(this,Os)[Os]=new Ge;babelHelpers.classPrivateFieldLooseBase(this,Os)[Os].subscribe(Ne.submit,(()=>{this.emit(vs.submit)}))}function _a(){if(o.SpeechConverter.isBrowserSupport()===false){return}babelHelpers.classPrivateFieldLooseBase(this,ms)[ms]=new o.SpeechConverter;babelHelpers.classPrivateFieldLooseBase(this,ms)[ms].subscribe(qe.start,babelHelpers.classPrivateFieldLooseBase(this,Zs)[Zs].bind(this));babelHelpers.classPrivateFieldLooseBase(this,ms)[ms].subscribe(qe.error,babelHelpers.classPrivateFieldLooseBase(this,Js)[Js].bind(this));babelHelpers.classPrivateFieldLooseBase(this,ms)[ms].subscribe(qe.result,babelHelpers.classPrivateFieldLooseBase(this,ea)[ea].bind(this));babelHelpers.classPrivateFieldLooseBase(this,ms)[ms].subscribe(qe.stop,babelHelpers.classPrivateFieldLooseBase(this,sa)[sa].bind(this))}function Ca(){babelHelpers.classPrivateFieldLooseBase(this,ws)[ws].start();babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].disabled=true;P.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,hs)[hs],"--recording");this.emit(vs.startRecording);babelHelpers.classPrivateFieldLooseBase(this,Os)[Os].disable()}function Ia(e){const{error:s}=e.getData();if(s==="aborted"){return}if(s==="not-allowed"){babelHelpers.classPrivateFieldLooseBase(this,Qs)[Qs](P.Loc.getMessage("AI_COPILOT_VOICE_INPUT_MICRO_NOT_ALLOWED"))}else{babelHelpers.classPrivateFieldLooseBase(this,Qs)[Qs](P.Loc.getMessage("AI_COPILOT_VOICE_INPUT_UNKNOWN_ERROR"))}}function ka(e){const s=new T({text:e,target:babelHelpers.classPrivateFieldLooseBase(this,ws)[ws].getContainer()});s.show();setTimeout((()=>{s.hide()}),1500)}function Ma(e){this.setValue(e.getData().text)}function Ea(){P.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,hs)[hs],"--recording");babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].disabled=false;babelHelpers.classPrivateFieldLooseBase(this,ws)[ws].stop();babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].focus();this.emit(vs.stopRecording);babelHelpers.classPrivateFieldLooseBase(this,Os)[Os].enable()}function ja(e,s=true){babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]=babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].value;babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].value=e;babelHelpers.classPrivateFieldLooseBase(this,la)[la]();babelHelpers.classPrivateFieldLooseBase(this,Ns)[Ns]();if(s){this.emit(vs.input,new c.BaseEvent({data:e}))}}function Ka(){P.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,hs)[hs],"height","auto");const e=P.Dom.getPosition(babelHelpers.classPrivateFieldLooseBase(this,Fs)[Fs]).height;const s=babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].scrollHeight>e?babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].scrollHeight:e;P.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,hs)[hs],"height",`${s}px`);this.emit(vs.adjustHeight)}let Ta=e=>e,xa,Aa;var Sa=babelHelpers.classPrivateFieldLooseKey("container");var Da=babelHelpers.classPrivateFieldLooseKey("renderReadMoreLink");class Ra{constructor(){Object.defineProperty(this,Da,{value:Na});Object.defineProperty(this,Sa,{writable:true,value:null})}render(){const e=new u.Icon({color:getComputedStyle(document.body).getPropertyValue("--ui-color-base-50"),size:22,icon:u.Main.WARNING});babelHelpers.classPrivateFieldLooseBase(this,Sa)[Sa]=P.Tag.render(xa||(xa=Ta`
			<div class="ai__copilot_waning-field">
				<span class="ai__copilot_waning-field-icon">
					${0}
				</span>
				<span class="ai__copilot_waning-field-text">
					${0}
				</span>
				${0}
			</div>
		`),e.render(),P.Loc.getMessage("AI_COPILOT_RESULT_WARNING"),babelHelpers.classPrivateFieldLooseBase(this,Da)[Da]());return babelHelpers.classPrivateFieldLooseBase(this,Sa)[Sa]}expand(){P.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,Sa)[Sa],"--expanded")}collapse(){P.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,Sa)[Sa],"--expanded")}}function Na(){const e=P.Tag.render(Aa||(Aa=Ta`
			<span class="ai__copilot_waning-field-link">
				${0}
			</span>
		`),P.Loc.getMessage("AI_COPILOT_RESULT_WARNING_MORE"));P.bind(e,"click",(()=>{const e=19076234;if(top.BX&&top.BX.Helper){top.BX.Helper.show(`redirect=detail&code=${e}`)}}));return e}const Wa="--highlight";const $a=Object.freeze({highlightMenuItem:"highlightMenuItem",clearHighlight:"clearHighlight"});var za=babelHelpers.classPrivateFieldLooseKey("menu");var Ua=babelHelpers.classPrivateFieldLooseKey("openMenu");var Ga=babelHelpers.classPrivateFieldLooseKey("highlightedMenuItem");var Xa=babelHelpers.classPrivateFieldLooseKey("clearHighlightAfterType");var Va=babelHelpers.classPrivateFieldLooseKey("highlightFirstItemAfterShow");var qa=babelHelpers.classPrivateFieldLooseKey("canGoOutFromTop");var Ya=babelHelpers.classPrivateFieldLooseKey("keyDownHandler");var Za=babelHelpers.classPrivateFieldLooseKey("menuItemMouseEnterHandler");var Ja=babelHelpers.classPrivateFieldLooseKey("menuItemMouseLeaveHandler");var Qa=babelHelpers.classPrivateFieldLooseKey("menuItemSubmenuOnShowHandler");var el=babelHelpers.classPrivateFieldLooseKey("menuItemSubmenuOnCloseHandler");var sl=babelHelpers.classPrivateFieldLooseKey("observeMenuChanges");var al=babelHelpers.classPrivateFieldLooseKey("handleKeyDown");var ll=babelHelpers.classPrivateFieldLooseKey("handleEnterKey");var tl=babelHelpers.classPrivateFieldLooseKey("handleArrowUpKey");var il=babelHelpers.classPrivateFieldLooseKey("handleArrowDownKey");var rl=babelHelpers.classPrivateFieldLooseKey("handleArrowLeftKey");var ol=babelHelpers.classPrivateFieldLooseKey("handleArrowRightKey");var bl=babelHelpers.classPrivateFieldLooseKey("showActiveItemSubmenuIfExist");var nl=babelHelpers.classPrivateFieldLooseKey("handleMenuItemEvents");var cl=babelHelpers.classPrivateFieldLooseKey("unsubscribeMenuItemEvents");var dl=babelHelpers.classPrivateFieldLooseKey("handleMenuItemMouseEnter");var pl=babelHelpers.classPrivateFieldLooseKey("handleMenuItemMouseLeave");var vl=babelHelpers.classPrivateFieldLooseKey("handleMenuItemSubmenuOnShow");var hl=babelHelpers.classPrivateFieldLooseKey("handleMenuItemSubmenuOnClose");var ul=babelHelpers.classPrivateFieldLooseKey("highlightMenuItem");var Pl=babelHelpers.classPrivateFieldLooseKey("getMenuItemBeforeHighlighted");var Ll=babelHelpers.classPrivateFieldLooseKey("getMenuItemAfterHighlighted");var Fl=babelHelpers.classPrivateFieldLooseKey("getHighlightedMenuItemPosition");var Hl=babelHelpers.classPrivateFieldLooseKey("clearMenuItemHighlight");var Bl=babelHelpers.classPrivateFieldLooseKey("clearHighlight");var fl=babelHelpers.classPrivateFieldLooseKey("scrollToActiveElem");class yl extends c.EventEmitter{constructor(e){super();Object.defineProperty(this,fl,{value:$l});Object.defineProperty(this,Bl,{value:Wl});Object.defineProperty(this,Hl,{value:Nl});Object.defineProperty(this,Fl,{value:Rl});Object.defineProperty(this,Ll,{value:Dl});Object.defineProperty(this,Pl,{value:Sl});Object.defineProperty(this,ul,{value:Al});Object.defineProperty(this,hl,{value:xl});Object.defineProperty(this,vl,{value:Tl});Object.defineProperty(this,pl,{value:Kl});Object.defineProperty(this,dl,{value:jl});Object.defineProperty(this,cl,{value:El});Object.defineProperty(this,nl,{value:Ml});Object.defineProperty(this,bl,{value:kl});Object.defineProperty(this,ol,{value:Il});Object.defineProperty(this,rl,{value:Cl});Object.defineProperty(this,il,{value:_l});Object.defineProperty(this,tl,{value:wl});Object.defineProperty(this,ll,{value:Ol});Object.defineProperty(this,al,{value:ml});Object.defineProperty(this,sl,{value:gl});Object.defineProperty(this,za,{writable:true,value:void 0});Object.defineProperty(this,Ua,{writable:true,value:void 0});Object.defineProperty(this,Ga,{writable:true,value:null});Object.defineProperty(this,Xa,{writable:true,value:false});Object.defineProperty(this,Va,{writable:true,value:false});Object.defineProperty(this,qa,{writable:true,value:false});Object.defineProperty(this,Ya,{writable:true,value:void 0});Object.defineProperty(this,Za,{writable:true,value:void 0});Object.defineProperty(this,Ja,{writable:true,value:void 0});Object.defineProperty(this,Qa,{writable:true,value:void 0});Object.defineProperty(this,el,{writable:true,value:void 0});this.setEventNamespace("AI:KeyboardMenu");babelHelpers.classPrivateFieldLooseBase(this,za)[za]=e.menu;babelHelpers.classPrivateFieldLooseBase(this,Xa)[Xa]=e.clearHighlightAfterType;babelHelpers.classPrivateFieldLooseBase(this,Va)[Va]=e.highlightFirstItemAfterShow;babelHelpers.classPrivateFieldLooseBase(this,qa)[qa]=e.canGoOutFromTop;babelHelpers.classPrivateFieldLooseBase(this,Ya)[Ya]=babelHelpers.classPrivateFieldLooseBase(this,al)[al].bind(this);babelHelpers.classPrivateFieldLooseBase(this,Za)[Za]=babelHelpers.classPrivateFieldLooseBase(this,dl)[dl].bind(this);babelHelpers.classPrivateFieldLooseBase(this,Ja)[Ja]=babelHelpers.classPrivateFieldLooseBase(this,pl)[pl].bind(this);babelHelpers.classPrivateFieldLooseBase(this,Qa)[Qa]=babelHelpers.classPrivateFieldLooseBase(this,vl)[vl].bind(this);babelHelpers.classPrivateFieldLooseBase(this,el)[el]=babelHelpers.classPrivateFieldLooseBase(this,hl)[hl].bind(this);const s=babelHelpers.classPrivateFieldLooseBase(this,nl)[nl].bind(this);babelHelpers.classPrivateFieldLooseBase(this,za)[za].getPopupWindow().subscribeFromOptions({onAfterShow:()=>{babelHelpers.classPrivateFieldLooseBase(this,Ua)[Ua]=babelHelpers.classPrivateFieldLooseBase(this,za)[za];P.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,za)[za].getPopupWindow().getPopupContainer(),"--keyboard-control");if(babelHelpers.classPrivateFieldLooseBase(this,Va)[Va]){this.highlightFirstItem();P.bind(document,"keydown",babelHelpers.classPrivateFieldLooseBase(this,Ya)[Ya])}},onAfterClose:()=>{P.unbind(document,"keydown",babelHelpers.classPrivateFieldLooseBase(this,Ya)[Ya]);babelHelpers.classPrivateFieldLooseBase(this,Bl)[Bl]()},onPopupFirstShow:()=>{babelHelpers.classPrivateFieldLooseBase(this,za)[za].getMenuItems().forEach((e=>{s(e)}));babelHelpers.classPrivateFieldLooseBase(this,sl)[sl]()}})}enableArrows(){P.bind(document,"keydown",babelHelpers.classPrivateFieldLooseBase(this,Ya)[Ya])}disableArrows(){P.unbind(document,"keydown",babelHelpers.classPrivateFieldLooseBase(this,Ya)[Ya])}getMenu(){return babelHelpers.classPrivateFieldLooseBase(this,za)[za]}highlightFirstItem(){const e=babelHelpers.classPrivateFieldLooseBase(this,za)[za].getMenuItems().find((e=>e.delimiter!==true));babelHelpers.classPrivateFieldLooseBase(this,ul)[ul](e)}}function gl(){const e=new MutationObserver((e=>{e.some((e=>{if(e.type==="childList"){this.highlightFirstItem();babelHelpers.classPrivateFieldLooseBase(this,za)[za].getMenuItems().forEach((e=>{babelHelpers.classPrivateFieldLooseBase(this,cl)[cl](e);babelHelpers.classPrivateFieldLooseBase(this,nl)[nl](e)}));return true}return false}))}));const s={childList:true,subtree:true};e.observe(babelHelpers.classPrivateFieldLooseBase(this,za)[za].getMenuContainer(),s)}function ml(e){var s,a;if((s=babelHelpers.classPrivateFieldLooseBase(this,za)[za])!=null&&(a=s.getPopupWindow())!=null&&a.isShown()&&babelHelpers.classPrivateFieldLooseBase(this,za)[za].getMenuItems().length>0){switch(e.key){case"Enter":return babelHelpers.classPrivateFieldLooseBase(this,ll)[ll]();case"ArrowUp":return babelHelpers.classPrivateFieldLooseBase(this,tl)[tl](e);case"ArrowDown":return babelHelpers.classPrivateFieldLooseBase(this,il)[il](e);case"ArrowRight":return babelHelpers.classPrivateFieldLooseBase(this,ol)[ol](e);case"ArrowLeft":return babelHelpers.classPrivateFieldLooseBase(this,rl)[rl](e);default:if(babelHelpers.classPrivateFieldLooseBase(this,Xa)[Xa]){babelHelpers.classPrivateFieldLooseBase(this,Bl)[Bl](true)}}}}function Ol(){if(babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga]&&babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga].href){babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga].getContainer().click()}else if(babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga]&&P.Type.isFunction(babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga].onclick)){babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga].onclick(null,babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga])}}function wl(e){var s,a;e.preventDefault();(s=babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga])==null?void 0:s.closeSubMenu();const l=babelHelpers.classPrivateFieldLooseBase(this,Pl)[Pl]();if(babelHelpers.classPrivateFieldLooseBase(this,qa)[qa]&&l===null&&((a=babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga])==null?void 0:a.getMenuWindow().getParentMenuItem())===null){babelHelpers.classPrivateFieldLooseBase(this,Bl)[Bl]();return}babelHelpers.classPrivateFieldLooseBase(this,ul)[ul](l)}function _l(e){var s;e.preventDefault();(s=babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga])==null?void 0:s.closeSubMenu();const a=babelHelpers.classPrivateFieldLooseBase(this,Ll)[Ll]();babelHelpers.classPrivateFieldLooseBase(this,ul)[ul](a)}function Cl(e){e.preventDefault();const s=babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga].getMenuWindow().getParentMenuItem();if(s){babelHelpers.classPrivateFieldLooseBase(this,ul)[ul](s);s.closeSubMenu()}}function Il(e){e.preventDefault();babelHelpers.classPrivateFieldLooseBase(this,bl)[bl]()}function kl(){var e;if((e=babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga])!=null&&e.hasSubMenu()){babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga].showSubMenu();const e=babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga].getSubMenu();babelHelpers.classPrivateFieldLooseBase(this,ul)[ul](e.getMenuItems()[0])}}function Ml(e){e.subscribe("onMouseEnter",babelHelpers.classPrivateFieldLooseBase(this,Za)[Za]);e.subscribe("onMouseLeave",babelHelpers.classPrivateFieldLooseBase(this,Ja)[Ja]);e.subscribe("SubMenu:onShow",babelHelpers.classPrivateFieldLooseBase(this,Qa)[Qa]);e.subscribe("SubMenu:onClose",babelHelpers.classPrivateFieldLooseBase(this,el)[el])}function El(e){e.unsubscribe("onMouseEnter",babelHelpers.classPrivateFieldLooseBase(this,Za)[Za]);e.unsubscribe("onMouseLeave",babelHelpers.classPrivateFieldLooseBase(this,Ja)[Ja]);e.unsubscribe("SubMenu:onShow",babelHelpers.classPrivateFieldLooseBase(this,Qa)[Qa]);e.unsubscribe("SubMenu:onClose",babelHelpers.classPrivateFieldLooseBase(this,el)[el])}function jl(e){babelHelpers.classPrivateFieldLooseBase(this,ul)[ul](e.getTarget());P.bind(document,"keydown",babelHelpers.classPrivateFieldLooseBase(this,Ya)[Ya])}function Kl(){babelHelpers.classPrivateFieldLooseBase(this,Bl)[Bl]()}function Tl(e){const s=e.getTarget();babelHelpers.classPrivateFieldLooseBase(this,Ua)[Ua]=s.getSubMenu();P.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,Ua)[Ua].getPopupWindow().getPopupContainer(),"--keyboard-control");s.getSubMenu().getMenuItems().forEach((e=>{babelHelpers.classPrivateFieldLooseBase(this,nl)[nl](e)}))}function xl(e){const s=e.getTarget();babelHelpers.classPrivateFieldLooseBase(this,Ua)[Ua]=s.getMenuWindow()}function Al(e){var s;if(!e){return}P.Dom.removeClass((s=babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga])==null?void 0:s.getContainer(),Wa);P.Dom.addClass(e==null?void 0:e.getContainer(),Wa);babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga]=e;babelHelpers.classPrivateFieldLooseBase(this,fl)[fl]();this.emit($a.highlightMenuItem)}function Sl(){var e;if(babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga]===null){return babelHelpers.classPrivateFieldLooseBase(this,Ua)[Ua].getMenuItems()[0]}const s=babelHelpers.classPrivateFieldLooseBase(this,Fl)[Fl]();const a=babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga].getMenuWindow().getMenuItems();if((e=a[s-1])!=null&&e.delimiter){return a[s-2]||null}return a[s-1]||null}function Dl(){var e,s,a;if(babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga]===null){var l;return((l=babelHelpers.classPrivateFieldLooseBase(this,Ua)[Ua])==null?void 0:l.getMenuItems()[0])||null}const t=babelHelpers.classPrivateFieldLooseBase(this,Fl)[Fl]();const i=(e=babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga])==null?void 0:(s=e.getMenuWindow())==null?void 0:s.getMenuItems();if((a=i[t+1])!=null&&a.delimiter){return i[t+2]||null}return i[t+1]||null}function Rl(){const e=babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga].getMenuWindow();return e.getMenuItemPosition(babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga].getId())}function Nl(e){P.Dom.removeClass(e==null?void 0:e.getContainer(),Wa)}function Wl(e=false){if(!babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga]){return}babelHelpers.classPrivateFieldLooseBase(this,Hl)[Hl](babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga]);if(e&&babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga].getMenuWindow().getParentMenuItem()){babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga].getMenuWindow().getParentMenuItem().closeSubMenu()}babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga]=null;this.emit($a.clearHighlight)}function $l(){const e=babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga];const s=babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga].getMenuWindow().getPopupWindow().getContentContainer();const a=P.Dom.getRelativePosition(s,e.getContainer());if(-a.y<0){s.scrollTop-=s.offsetHeight}else if(-a.y+10>a.height){s.scrollTop+=s.offsetHeight}}let zl=e=>e,Ul,Gl;const Xl=new Set([L.cancel,L.repeat,L.save,L.addBelow,L.edit,L.close,L.copy]);const Vl=Object.freeze({select:"select",open:"open",close:"close",clearHighlight:"clearHighlight",highlightMenuItem:"highlightMenuItem"});var ql=babelHelpers.classPrivateFieldLooseKey("keyboardMenu");var Yl=babelHelpers.classPrivateFieldLooseKey("menuItems");var Zl=babelHelpers.classPrivateFieldLooseKey("filter");var Jl=babelHelpers.classPrivateFieldLooseKey("cacheable");var Ql=babelHelpers.classPrivateFieldLooseKey("keyboardControlOptions");var et=babelHelpers.classPrivateFieldLooseKey("forceTop");var st=babelHelpers.classPrivateFieldLooseKey("closeAllSubmenus");var at=babelHelpers.classPrivateFieldLooseKey("filterMenuItems");var lt=babelHelpers.classPrivateFieldLooseKey("getMenu");var tt=babelHelpers.classPrivateFieldLooseKey("initKeyboardMenu");var it=babelHelpers.classPrivateFieldLooseKey("isEntireMenuVisible");var rt=babelHelpers.classPrivateFieldLooseKey("scrollForMenuVisibility");var ot=babelHelpers.classPrivateFieldLooseKey("getMenuItems");var bt=babelHelpers.classPrivateFieldLooseKey("getMenuItem");var nt=babelHelpers.classPrivateFieldLooseKey("isSeparatorMenuItem");var ct=babelHelpers.classPrivateFieldLooseKey("getAbilityMenuItem");var dt=babelHelpers.classPrivateFieldLooseKey("renderAbilityMenuItemIcon");var pt=babelHelpers.classPrivateFieldLooseKey("getCheckIcon");var vt=babelHelpers.classPrivateFieldLooseKey("getMenuItemClassname");var ht=babelHelpers.classPrivateFieldLooseKey("handleMenuItemClick");var ut=babelHelpers.classPrivateFieldLooseKey("getSectionSeparatorMenuItem");class Pt extends c.EventEmitter{constructor(e){var s;super(e);Object.defineProperty(this,ut,{value:Mt});Object.defineProperty(this,ht,{value:kt});Object.defineProperty(this,vt,{value:It});Object.defineProperty(this,pt,{value:Ct});Object.defineProperty(this,dt,{value:_t});Object.defineProperty(this,ct,{value:wt});Object.defineProperty(this,nt,{value:Ot});Object.defineProperty(this,bt,{value:mt});Object.defineProperty(this,ot,{value:gt});Object.defineProperty(this,rt,{value:yt});Object.defineProperty(this,it,{value:ft});Object.defineProperty(this,tt,{value:Bt});Object.defineProperty(this,lt,{value:Ht});Object.defineProperty(this,at,{value:Ft});Object.defineProperty(this,st,{value:Lt});Object.defineProperty(this,ql,{writable:true,value:void 0});Object.defineProperty(this,Yl,{writable:true,value:void 0});Object.defineProperty(this,Zl,{writable:true,value:void 0});Object.defineProperty(this,Jl,{writable:true,value:void 0});Object.defineProperty(this,Ql,{writable:true,value:void 0});Object.defineProperty(this,et,{writable:true,value:true});this.setEventNamespace("AI.Copilot.Menu");babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl]=e.items;babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl]=(s=e.cacheable)!=null?s:true;babelHelpers.classPrivateFieldLooseBase(this,et)[et]=e.forceTop===undefined?babelHelpers.classPrivateFieldLooseBase(this,et)[et]:e.forceTop===true;if(e.keyboardControlOptions){babelHelpers.classPrivateFieldLooseBase(this,Ql)[Ql]=e.keyboardControlOptions}else{babelHelpers.classPrivateFieldLooseBase(this,Ql)[Ql]={canGoOutFromTop:true,highlightFirstItemAfterShow:false,clearHighlightAfterType:false}}}open(){babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]().show();this.adjustPosition();this.emit(Vl.open)}show(){var e,s,a;P.Dom.style((e=this.getPopup())==null?void 0:e.getPopupContainer(),"border",null);(s=this.getPopup())==null?void 0:s.setMaxWidth(null);(a=this.getPopup())==null?void 0:a.setMinWidth(258);this.adjustPosition()}close(){babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]().close();babelHelpers.classPrivateFieldLooseBase(this,st)[st]();this.emit(Vl.close)}hide(){var e,s,a;P.Dom.style((e=this.getPopup())==null?void 0:e.getPopupContainer(),"border","none");(s=this.getPopup())==null?void 0:s.setMaxWidth(0);(a=this.getPopup())==null?void 0:a.setMinWidth(0);this.adjustPosition();babelHelpers.classPrivateFieldLooseBase(this,st)[st]()}contains(e){for(const l of babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]().getMenuItems()){var s,a;const t=(s=l.getSubMenu())==null?void 0:s.getPopupWindow();if(t!=null&&(a=t.getPopupContainer())!=null&&a.contains(e)){return true}}return this.getPopup().getPopupContainer().contains(e)}isShown(){return babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]().getPopupWindow().isShown()}setFilter(e){return;babelHelpers.classPrivateFieldLooseBase(this,Zl)[Zl]=P.Type.isString(e)?e:"";if(babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]()){babelHelpers.classPrivateFieldLooseBase(this,st)[st]();babelHelpers.classPrivateFieldLooseBase(this,at)[at]()}}setBindElement(e,s){babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]().getPopupWindow().setBindElement(e);babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]().getPopupWindow().setOffset({offsetLeft:s==null?void 0:s.left,offsetTop:s==null?void 0:s.top});babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]().getPopupWindow().adjustPosition()}getPopup(){return babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]().getPopupWindow()}adjustPosition(){babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]().getPopupWindow().adjustPosition({forceBindPosition:true,forceTop:babelHelpers.classPrivateFieldLooseBase(this,et)[et]})}replaceMenuItemSubmenu(e){const s=babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]().getMenuItems().find((s=>e.code===s.getId()));s.destroySubMenu();s._items=babelHelpers.classPrivateFieldLooseBase(this,ot)[ot](e.children);s.addSubMenu(babelHelpers.classPrivateFieldLooseBase(this,ot)[ot](e.children))}enableArrowsKey(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,ql)[ql])==null?void 0:e.enableArrows()}disableArrowsKey(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,ql)[ql])==null?void 0:e.disableArrows()}}function Lt(){babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]().getMenuItems().forEach((e=>{e.closeSubMenu()}))}function Ft(){babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]().menuItems=[];const e=babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].filter((e=>e.text.toLowerCase().indexOf(babelHelpers.classPrivateFieldLooseBase(this,Zl)[Zl]?babelHelpers.classPrivateFieldLooseBase(this,Zl)[Zl].toLowerCase():"")===0||e.separator));const s=e.filter(((e,s,a)=>!e.separator||a[s+1]&&!a[s+1].separator));babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]().layout.itemsContainer.innerHTML="";if(s.length===0){P.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]().layout.menuContainer,"padding",0);P.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]().getPopupWindow().getPopupContainer(),"border",0)}else{P.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]().getPopupWindow().getPopupContainer(),"border",null);P.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]().layout.menuContainer,"padding",null)}babelHelpers.classPrivateFieldLooseBase(this,ot)[ot](s).forEach((e=>{babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]().addMenuItem(e)}))}function Ht(){if(!babelHelpers.classPrivateFieldLooseBase(this,ql)[ql]){babelHelpers.classPrivateFieldLooseBase(this,tt)[tt]()}return babelHelpers.classPrivateFieldLooseBase(this,ql)[ql].getMenu()}function Bt(){const e=new n.Menu({minWidth:258,maxHeight:372,closeByEsc:false,closeIcon:false,items:babelHelpers.classPrivateFieldLooseBase(this,ot)[ot](babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl]),toFrontOnShow:true,autoHide:false,className:"ai__copilot-scope ai__copilot-menu-popup",cacheable:babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl],events:{onPopupClose:e=>{P.Dom.style(e.getPopupContainer(),"border","none")},onPopupAfterClose:e=>{P.Dom.style(e.getPopupContainer(),"border",null)},onPopupShow:()=>{if(babelHelpers.classPrivateFieldLooseBase(this,et)[et]&&babelHelpers.classPrivateFieldLooseBase(this,it)[it]()===false){babelHelpers.classPrivateFieldLooseBase(this,rt)[rt]()}}}});const s=new yl({menu:e,...babelHelpers.classPrivateFieldLooseBase(this,Ql)[Ql]});s.subscribe($a.clearHighlight,(()=>{this.emit(Vl.clearHighlight)}));s.subscribe($a.highlightMenuItem,(()=>{this.emit(Vl.highlightMenuItem)}));babelHelpers.classPrivateFieldLooseBase(this,ql)[ql]=s}function ft(){const e=babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]().getPopupWindow().getPopupContainer();const s=e.getBoundingClientRect().bottom;return s<window.innerHeight}function yt(){const e=babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]().getPopupWindow().getPopupContainer();const s=P.Dom.getPosition(e);window.scrollTo({top:window.scrollY+e.offsetHeight,behavior:"smooth"});if(s.bottom>document.body.scrollHeight){P.Dom.style(document.body,"min-height",`${s.bottom}px`)}}function gt(e,s=false){if(!e){return[]}return e.map((e=>babelHelpers.classPrivateFieldLooseBase(this,bt)[bt](e,s)))}function mt(e,s){return babelHelpers.classPrivateFieldLooseBase(this,nt)[nt](e)?babelHelpers.classPrivateFieldLooseBase(this,ut)[ut](e):babelHelpers.classPrivateFieldLooseBase(this,ct)[ct](e,s)}function Ot(e){return e.separator}function wt(e,s=false){const a=babelHelpers.classPrivateFieldLooseBase(this,dt)[dt](e);const l=babelHelpers.classPrivateFieldLooseBase(this,pt)[pt]();const t=e.icon?P.Tag.render(Ul||(Ul=zl`<div class="ai__copilot-menu_item-icon">${0}</div>`),a):null;const i=P.Tag.render(Gl||(Gl=zl`
			<div class="${0}">
				<div class="ai__copilot-menu_item-left">
					${0}
					<div class="ai__copilot-menu_item-text">${0}</div>
				</div>
				<div class="ai__copilot-menu_item-check">
					${0}
				</div>
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,vt)[vt](e,s),t,P.Text.encode(e.text),e.selected?l.render():"");return{html:i,id:e.code||"",text:e.text,href:e.href,className:`menu-popup-no-icon ${e.arrow?"menu-popup-item-submenu":""}`,onclick:babelHelpers.classPrivateFieldLooseBase(this,ht)[ht].bind(this),items:babelHelpers.classPrivateFieldLooseBase(this,ot)[ot](e.children,true),cacheable:false,disabled:e.disabled}}function _t(e){let s=null;if(e.icon){try{const a=new u.Icon({size:24,icon:e.icon||undefined});s=a.render()}catch{s=null}}return s}function Ct(){const e=getComputedStyle(document.body).getPropertyValue("--ui-color-link-primary-base");return new u.Icon({icon:u.Main.CHECK,size:18,color:e})}function It(e,s){let a=["ai__copilot-menu_item"];if(s){a=[...a,"--no-icon"]}if(Xl.has(e.code)||e.notHighlight){a=[...a,"--system"]}if(e.selected){a=[...a,"--selected"]}return a.join(" ")}function kt(e,s){var a,l;if(s!=null&&s.hasSubMenu()){return}(a=s.getMenuWindow())==null?void 0:(l=a.getParentMenuItem())==null?void 0:l.closeSubMenu();if(s.href){return}this.emit(Vl.select,new c.BaseEvent({data:{command:s.getId()}}))}function Mt(e){return{id:e.title||"",text:e.title,title:e.title,delimiter:true}}const Et=Object.freeze({text:"text_operations",image:"image_operations"});const jt=Object.freeze({textNew:"create_new",textReply:"reply_context",textEdit:"edit_context",imageNew:"create_image"});const Kt=Object.freeze({fromText:"from_text",fromAudio:"from_audio"});const Tt=Object.freeze({editorButton:"editor_button",spaceButton:"space_button",popupButton:"popup_button"});const xt=Object.freeze({open:"open",generate:"generate",success:"success",error:"error",save:"save"});var At=babelHelpers.classPrivateFieldLooseKey("tool");var St=babelHelpers.classPrivateFieldLooseKey("category");var Dt=babelHelpers.classPrivateFieldLooseKey("event");var Rt=babelHelpers.classPrivateFieldLooseKey("type");var Nt=babelHelpers.classPrivateFieldLooseKey("c_section");var Wt=babelHelpers.classPrivateFieldLooseKey("c_sub_section");var $t=babelHelpers.classPrivateFieldLooseKey("c_element");var zt=babelHelpers.classPrivateFieldLooseKey("params");var Ut=babelHelpers.classPrivateFieldLooseKey("setCategory");var Gt=babelHelpers.classPrivateFieldLooseKey("setType");var Xt=babelHelpers.classPrivateFieldLooseKey("setContextSubSection");var Vt=babelHelpers.classPrivateFieldLooseKey("setContextElement");var qt=babelHelpers.classPrivateFieldLooseKey("sendData");var Yt=babelHelpers.classPrivateFieldLooseKey("getData");class Zt{constructor(){Object.defineProperty(this,Yt,{value:li});Object.defineProperty(this,qt,{value:ai});Object.defineProperty(this,Vt,{value:si});Object.defineProperty(this,Xt,{value:ei});Object.defineProperty(this,Gt,{value:Qt});Object.defineProperty(this,Ut,{value:Jt});Object.defineProperty(this,At,{writable:true,value:void 0});Object.defineProperty(this,St,{writable:true,value:void 0});Object.defineProperty(this,Dt,{writable:true,value:void 0});Object.defineProperty(this,Rt,{writable:true,value:void 0});Object.defineProperty(this,Nt,{writable:true,value:void 0});Object.defineProperty(this,Wt,{writable:true,value:void 0});Object.defineProperty(this,$t,{writable:true,value:void 0});Object.defineProperty(this,zt,{writable:true,value:{}});babelHelpers.classPrivateFieldLooseBase(this,At)[At]="AI";babelHelpers.classPrivateFieldLooseBase(this,St)[St]="";this.setTypeTextNew()}setCategoryText(){return babelHelpers.classPrivateFieldLooseBase(this,Ut)[Ut](Et.text)}setCategoryImage(){return babelHelpers.classPrivateFieldLooseBase(this,Ut)[Ut](Et.image)}setTypeTextNew(){return babelHelpers.classPrivateFieldLooseBase(this,Gt)[Gt](jt.textNew)}setTypeTextReply(){return babelHelpers.classPrivateFieldLooseBase(this,Gt)[Gt](jt.textReply)}setTypeTextEdit(){return babelHelpers.classPrivateFieldLooseBase(this,Gt)[Gt](jt.textEdit)}setTypeImageNew(){return babelHelpers.classPrivateFieldLooseBase(this,Gt)[Gt](jt.imageNew)}setContextSection(e){if(e.length>0){babelHelpers.classPrivateFieldLooseBase(this,Nt)[Nt]=e}return this}setContextTypeFromText(){return babelHelpers.classPrivateFieldLooseBase(this,Xt)[Xt](Kt.fromText)}setContextTypeFromAudio(){return babelHelpers.classPrivateFieldLooseBase(this,Xt)[Xt](Kt.fromAudio)}setContextElementEditorButton(){return babelHelpers.classPrivateFieldLooseBase(this,Vt)[Vt](Tt.editorButton)}setContextElementSpaceButton(){return babelHelpers.classPrivateFieldLooseBase(this,Vt)[Vt](Tt.spaceButton)}setContextElementPopupButton(){return babelHelpers.classPrivateFieldLooseBase(this,Vt)[Vt](Tt.popupButton)}setParams(e){babelHelpers.classPrivateFieldLooseBase(this,zt)[zt]=e;return this}addParams(e){Object.assign(babelHelpers.classPrivateFieldLooseBase(this,zt)[zt],e);return this}sendEventOpen(){babelHelpers.classPrivateFieldLooseBase(this,Dt)[Dt]=xt.open;return babelHelpers.classPrivateFieldLooseBase(this,qt)[qt]()}sendEventGenerate(){babelHelpers.classPrivateFieldLooseBase(this,Dt)[Dt]=xt.generate;return babelHelpers.classPrivateFieldLooseBase(this,qt)[qt]()}sendEventSuccess(){babelHelpers.classPrivateFieldLooseBase(this,Dt)[Dt]=xt.success;return babelHelpers.classPrivateFieldLooseBase(this,qt)[qt]()}sendEventError(){babelHelpers.classPrivateFieldLooseBase(this,Dt)[Dt]=xt.error;return babelHelpers.classPrivateFieldLooseBase(this,qt)[qt]()}sendEventSave(){babelHelpers.classPrivateFieldLooseBase(this,Dt)[Dt]=xt.save;return babelHelpers.classPrivateFieldLooseBase(this,qt)[qt]()}}function Jt(e){if(Object.values(Et).indexOf(e)!==-1){babelHelpers.classPrivateFieldLooseBase(this,St)[St]=e}return this}function Qt(e){if(Object.values(jt).indexOf(e)!==-1){babelHelpers.classPrivateFieldLooseBase(this,Rt)[Rt]=e}return this}function ei(e){if(Object.values(Kt).indexOf(e)!==-1){babelHelpers.classPrivateFieldLooseBase(this,Wt)[Wt]=e}return this}function si(e){if(Object.values(Tt).indexOf(e)!==-1){babelHelpers.classPrivateFieldLooseBase(this,$t)[$t]=e}return this}function ai(){const e=babelHelpers.classPrivateFieldLooseBase(this,Yt)[Yt]();if(!e){return}P.Runtime.loadExtension("ui.analytics").then((s=>{const{sendData:a}=s;a(e)}))}function li(){if(!babelHelpers.classPrivateFieldLooseBase(this,At)[At]||!babelHelpers.classPrivateFieldLooseBase(this,St)[St]||!babelHelpers.classPrivateFieldLooseBase(this,Dt)[Dt]||!babelHelpers.classPrivateFieldLooseBase(this,Rt)[Rt]){return null}const e={tool:babelHelpers.classPrivateFieldLooseBase(this,At)[At],category:babelHelpers.classPrivateFieldLooseBase(this,St)[St],event:babelHelpers.classPrivateFieldLooseBase(this,Dt)[Dt],type:babelHelpers.classPrivateFieldLooseBase(this,Rt)[Rt]};if(babelHelpers.classPrivateFieldLooseBase(this,Nt)[Nt]){e["c_section"]=babelHelpers.classPrivateFieldLooseBase(this,Nt)[Nt]}if(babelHelpers.classPrivateFieldLooseBase(this,Wt)[Wt]){e["c_sub_section"]=babelHelpers.classPrivateFieldLooseBase(this,Wt)[Wt]}if(babelHelpers.classPrivateFieldLooseBase(this,$t)[$t]){e["c_element"]=babelHelpers.classPrivateFieldLooseBase(this,$t)[$t]}if(babelHelpers.classPrivateFieldLooseBase(this,zt)[zt]&&P.Type.isObject(babelHelpers.classPrivateFieldLooseBase(this,zt)[zt])){let s=1;const a=5;for(let l in babelHelpers.classPrivateFieldLooseBase(this,zt)[zt]){if(s<=a){const a="p"+s++;P.Text.toCamelCase(l);e[a]=P.Text.toCamelCase(l)+"_"+P.Text.toCamelCase(babelHelpers.classPrivateFieldLooseBase(this,zt)[zt][l])}}}return e}class ti extends F{static getMenuItems(e){const{prompts:s,selectedText:a}=e;const l=a?"AI_COPILOT_COMMAND_REPLACE":"AI_COPILOT_COMMAND_SAVE";const t={text:P.Loc.getMessage(l),code:"save",icon:"check"};const i={text:P.Loc.getMessage("AI_COPILOT_COMMAND_EDIT"),code:L.edit,icon:"pencil-60"};const r=a?{text:P.Loc.getMessage("AI_COPILOT_COMMAND_ADD_BELOW"),code:"add_below",icon:"download"}:null;return[t,r,{separator:true},i,...ii(s),{text:P.Loc.getMessage("AI_COPILOT_COMMAND_REPEAT"),code:"repeat",icon:"left-semicircular-anticlockwise-arrow-1"},{separator:true},ri(),{text:P.Loc.getMessage("AI_COPILOT_COMMAND_CANCEL"),code:"cancel",icon:"cross-45"}].filter((e=>e))}static getMenuItemsForReadonlyResult(){return[{text:P.Loc.getMessage("AI_COPILOT_COMMAND_COPY"),code:"copy",icon:u.Actions.COPY_PLATES},{separator:true},ri(),{text:P.Loc.getMessage("AI_COPILOT_COMMAND_CLOSE"),code:"close",icon:u.Actions.CROSS_45}]}}function ii(e){const s=e.filter((e=>e.workWithResult));return s.map((e=>({text:e.title,code:e.code,icon:e.icon})))}function ri(){return{code:L.feedback,text:P.Loc.getMessage("AI_COPILOT_MENU_ITEM_AI_FEEDBACK"),icon:u.Main.FEEDBACK,notHighlight:true}}class oi{static getMenuItems(){return[{code:"repeat",text:P.Loc.getMessage("AI_COPILOT_COMMAND_REPEAT"),icon:"left-semicircular-anticlockwise-arrow-1"},{text:P.Loc.getMessage("AI_COPILOT_COMMAND_EDIT"),code:L.edit,icon:"pencil-60"},{code:"cancel",text:P.Loc.getMessage("AI_COPILOT_COMMAND_CANCEL"),icon:"cross-45"}]}}let bi=e=>e,ni;const ci=new P.Cache.MemoryCache;async function di(e){return ci.remember(e,(()=>P.Runtime.loadExtension(e)))}var pi=babelHelpers.classPrivateFieldLooseKey("copilotPopup");var vi=babelHelpers.classPrivateFieldLooseKey("generalMenu");var hi=babelHelpers.classPrivateFieldLooseKey("resultMenu");var ui=babelHelpers.classPrivateFieldLooseKey("errorMenu");var Pi=babelHelpers.classPrivateFieldLooseKey("inputField");var Li=babelHelpers.classPrivateFieldLooseKey("resultField");var Fi=babelHelpers.classPrivateFieldLooseKey("userPrompt");var Hi=babelHelpers.classPrivateFieldLooseKey("context");var Bi=babelHelpers.classPrivateFieldLooseKey("selectedText");var fi=babelHelpers.classPrivateFieldLooseKey("engine");var yi=babelHelpers.classPrivateFieldLooseKey("engines");var gi=babelHelpers.classPrivateFieldLooseKey("aiResultText");var mi=babelHelpers.classPrivateFieldLooseKey("engineCode");var Oi=babelHelpers.classPrivateFieldLooseKey("category");var wi=babelHelpers.classPrivateFieldLooseKey("prompts");var _i=babelHelpers.classPrivateFieldLooseKey("analytic");var Ci=babelHelpers.classPrivateFieldLooseKey("selectedCommand");var Ii=babelHelpers.classPrivateFieldLooseKey("preventAutoHide");var ki=babelHelpers.classPrivateFieldLooseKey("autoHide");var Mi=babelHelpers.classPrivateFieldLooseKey("menuTopOffset");var Ei=babelHelpers.classPrivateFieldLooseKey("currentGenerateRequestId");var ji=babelHelpers.classPrivateFieldLooseKey("container");var Ki=babelHelpers.classPrivateFieldLooseKey("menuForceTop");var Ti=babelHelpers.classPrivateFieldLooseKey("errorsCount");var xi=babelHelpers.classPrivateFieldLooseKey("readonly");var Ai=babelHelpers.classPrivateFieldLooseKey("resultStack");var Si=babelHelpers.classPrivateFieldLooseKey("warningField");var Di=babelHelpers.classPrivateFieldLooseKey("copilotBanner");var Ri=babelHelpers.classPrivateFieldLooseKey("permissions");var Ni=babelHelpers.classPrivateFieldLooseKey("staticEulaRestrictCallback");var Wi=babelHelpers.classPrivateFieldLooseKey("toolingPromiseByCategory");var $i=babelHelpers.classPrivateFieldLooseKey("getTooling");var zi=babelHelpers.classPrivateFieldLooseKey("initByOptions");var Ui=babelHelpers.classPrivateFieldLooseKey("handleGetToolingResponse");var Gi=babelHelpers.classPrivateFieldLooseKey("getOpenMenu");var Xi=babelHelpers.classPrivateFieldLooseKey("getPromptTitlePrefix");var Vi=babelHelpers.classPrivateFieldLooseKey("renderWarningField");var qi=babelHelpers.classPrivateFieldLooseKey("renderInput");var Yi=babelHelpers.classPrivateFieldLooseKey("generate");var Zi=babelHelpers.classPrivateFieldLooseKey("getAnalytic");var Ji=babelHelpers.classPrivateFieldLooseKey("expandWarningField");var Qi=babelHelpers.classPrivateFieldLooseKey("addResultToStack");var er=babelHelpers.classPrivateFieldLooseKey("handleGenerateError");var sr=babelHelpers.classPrivateFieldLooseKey("isAgreementError");var ar=babelHelpers.classPrivateFieldLooseKey("handleAgreementError");var lr=babelHelpers.classPrivateFieldLooseKey("initErrorMenu");var tr=babelHelpers.classPrivateFieldLooseKey("showResultMenu");var ir=babelHelpers.classPrivateFieldLooseKey("initResultMenu");var rr=babelHelpers.classPrivateFieldLooseKey("getResultMenuItems");var or=babelHelpers.classPrivateFieldLooseKey("handleResultMenuCommand");var br=babelHelpers.classPrivateFieldLooseKey("handleRepeatCommand");var nr=babelHelpers.classPrivateFieldLooseKey("handleEditCommand");var cr=babelHelpers.classPrivateFieldLooseKey("handleCancelCommand");var dr=babelHelpers.classPrivateFieldLooseKey("handleCloseCommand");var pr=babelHelpers.classPrivateFieldLooseKey("handleCopyCommand");var vr=babelHelpers.classPrivateFieldLooseKey("setEnginePayload");var hr=babelHelpers.classPrivateFieldLooseKey("renderResultField");var ur=babelHelpers.classPrivateFieldLooseKey("mouseDownHandler");var Pr=babelHelpers.classPrivateFieldLooseKey("autoHideHandler");var Lr=babelHelpers.classPrivateFieldLooseKey("hideMenus");var Fr=babelHelpers.classPrivateFieldLooseKey("adjustMenus");var Hr=babelHelpers.classPrivateFieldLooseKey("initGeneralMenu");var Br=babelHelpers.classPrivateFieldLooseKey("handleGeneralMenuSelect");var fr=babelHelpers.classPrivateFieldLooseKey("handleMenuItemCommandRequiredUserMessage");var yr=babelHelpers.classPrivateFieldLooseKey("handleMenuItemCommandNotRequiredUserMessage");var gr=babelHelpers.classPrivateFieldLooseKey("getPromptTitleByCommandFromPrompts");var mr=babelHelpers.classPrivateFieldLooseKey("isCommandRequiredUserMessage");var Or=babelHelpers.classPrivateFieldLooseKey("isCommandRequiredContextMessage");var wr=babelHelpers.classPrivateFieldLooseKey("getPromptByCode");var _r=babelHelpers.classPrivateFieldLooseKey("getLastCommandCode");var Cr=babelHelpers.classPrivateFieldLooseKey("handleEnginesMenuItem");var Ir=babelHelpers.classPrivateFieldLooseKey("setSelectedEngine");var kr=babelHelpers.classPrivateFieldLooseKey("openFeedbackForm");class Mr extends c.EventEmitter{static async checkEulaRestrict(){var e;const s=await di("bitrix24.license.feature");if(!(s!=null&&s.Feature)){return false}const a=P.Type.isFunction((e=babelHelpers.classPrivateFieldLooseBase(Mr,Ni)[Ni])==null?void 0:e.then);const l=babelHelpers.classPrivateFieldLooseBase(Mr,Ni)[Ni]===null;if(l||a){try{if(l){babelHelpers.classPrivateFieldLooseBase(Mr,Ni)[Ni]=s.Feature.checkEulaRestrictions("ai_available_by_version")}await babelHelpers.classPrivateFieldLooseBase(Mr,Ni)[Ni];babelHelpers.classPrivateFieldLooseBase(Mr,Ni)[Ni]=false;return false}catch(e){if(e.callback){babelHelpers.classPrivateFieldLooseBase(Mr,Ni)[Ni]=e.callback;return true}console.error(e);return false}}return P.Type.isFunction(babelHelpers.classPrivateFieldLooseBase(Mr,Ni)[Ni])}constructor(e){var a;super(e);Object.defineProperty(this,kr,{value:Bo});Object.defineProperty(this,Ir,{value:Ho});Object.defineProperty(this,Cr,{value:Fo});Object.defineProperty(this,_r,{value:Lo});Object.defineProperty(this,wr,{value:Po});Object.defineProperty(this,Or,{value:uo});Object.defineProperty(this,mr,{value:ho});Object.defineProperty(this,gr,{value:vo});Object.defineProperty(this,yr,{value:po});Object.defineProperty(this,fr,{value:co});Object.defineProperty(this,Br,{value:no});Object.defineProperty(this,Hr,{value:bo});Object.defineProperty(this,Fr,{value:oo});Object.defineProperty(this,Lr,{value:ro});Object.defineProperty(this,Pr,{value:io});Object.defineProperty(this,ur,{value:to});Object.defineProperty(this,hr,{value:lo});Object.defineProperty(this,vr,{value:ao});Object.defineProperty(this,pr,{value:so});Object.defineProperty(this,dr,{value:eo});Object.defineProperty(this,cr,{value:Qr});Object.defineProperty(this,nr,{value:Jr});Object.defineProperty(this,br,{value:Zr});Object.defineProperty(this,or,{value:Yr});Object.defineProperty(this,rr,{value:qr});Object.defineProperty(this,ir,{value:Vr});Object.defineProperty(this,tr,{value:Xr});Object.defineProperty(this,lr,{value:Gr});Object.defineProperty(this,ar,{value:Ur});Object.defineProperty(this,sr,{value:zr});Object.defineProperty(this,er,{value:$r});Object.defineProperty(this,Qi,{value:Wr});Object.defineProperty(this,Ji,{value:Nr});Object.defineProperty(this,Zi,{value:Rr});Object.defineProperty(this,Yi,{value:Dr});Object.defineProperty(this,qi,{value:Sr});Object.defineProperty(this,Vi,{value:Ar});Object.defineProperty(this,Xi,{value:xr});Object.defineProperty(this,Gi,{value:Tr});Object.defineProperty(this,Ui,{value:Kr});Object.defineProperty(this,zi,{value:jr});Object.defineProperty(this,$i,{value:Er});Object.defineProperty(this,pi,{writable:true,value:void 0});Object.defineProperty(this,vi,{writable:true,value:void 0});Object.defineProperty(this,hi,{writable:true,value:void 0});Object.defineProperty(this,ui,{writable:true,value:void 0});Object.defineProperty(this,Pi,{writable:true,value:void 0});Object.defineProperty(this,Li,{writable:true,value:void 0});Object.defineProperty(this,Fi,{writable:true,value:void 0});Object.defineProperty(this,Hi,{writable:true,value:void 0});Object.defineProperty(this,Bi,{writable:true,value:void 0});Object.defineProperty(this,fi,{writable:true,value:void 0});Object.defineProperty(this,yi,{writable:true,value:void 0});Object.defineProperty(this,gi,{writable:true,value:void 0});Object.defineProperty(this,mi,{writable:true,value:void 0});Object.defineProperty(this,Oi,{writable:true,value:void 0});Object.defineProperty(this,wi,{writable:true,value:void 0});Object.defineProperty(this,_i,{writable:true,value:void 0});Object.defineProperty(this,Ci,{writable:true,value:void 0});Object.defineProperty(this,Ii,{writable:true,value:void 0});Object.defineProperty(this,ki,{writable:true,value:void 0});Object.defineProperty(this,Mi,{writable:true,value:8});Object.defineProperty(this,Ei,{writable:true,value:void 0});Object.defineProperty(this,ji,{writable:true,value:null});Object.defineProperty(this,Ki,{writable:true,value:true});Object.defineProperty(this,Ti,{writable:true,value:0});Object.defineProperty(this,xi,{writable:true,value:false});Object.defineProperty(this,Ai,{writable:true,value:[]});Object.defineProperty(this,Si,{writable:true,value:null});Object.defineProperty(this,Di,{writable:true,value:void 0});Object.defineProperty(this,Ri,{writable:true,value:void 0});this.setEventNamespace("AI.Copilot");babelHelpers.classPrivateFieldLooseBase(this,Ki)[Ki]=e.menuForceTop===undefined?babelHelpers.classPrivateFieldLooseBase(this,Ki)[Ki]:e.menuForceTop===true;babelHelpers.classPrivateFieldLooseBase(this,Bi)[Bi]=e.selectedText||"";babelHelpers.classPrivateFieldLooseBase(this,xi)[xi]=e.readonly===true;babelHelpers.classPrivateFieldLooseBase(this,Hi)[Hi]=e.context||"";babelHelpers.classPrivateFieldLooseBase(this,hi)[hi]=null;babelHelpers.classPrivateFieldLooseBase(this,Oi)[Oi]=e.category;babelHelpers.classPrivateFieldLooseBase(this,Ci)[Ci]=null;babelHelpers.classPrivateFieldLooseBase(this,wi)[wi]=e.prompts||[];babelHelpers.classPrivateFieldLooseBase(this,yi)[yi]=e.engines||[];babelHelpers.classPrivateFieldLooseBase(this,gi)[gi]="";babelHelpers.classPrivateFieldLooseBase(this,fi)[fi]=new s.Engine;babelHelpers.classPrivateFieldLooseBase(this,fi)[fi].setModuleId(e.moduleId).setContextId(e.contextId).setContextParameters(e.contextParameters).setParameters({promptCategory:babelHelpers.classPrivateFieldLooseBase(this,Oi)[Oi]});babelHelpers.classPrivateFieldLooseBase(this,mi)[mi]="";babelHelpers.classPrivateFieldLooseBase(this,ki)[ki]=(a=e.autoHide)!=null?a:false;babelHelpers.classPrivateFieldLooseBase(this,Ii)[Ii]=P.Type.isFunction(e.preventAutoHide)?e.preventAutoHide:()=>false;babelHelpers.classPrivateFieldLooseBase(this,zi)[zi]()}render(){babelHelpers.classPrivateFieldLooseBase(this,ji)[ji]=P.Tag.render(ni||(ni=bi`
			<div class="ai__copilot ai__copilot-scope">
				${0}
				${0}
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,hr)[hr](),babelHelpers.classPrivateFieldLooseBase(this,qi)[qi](),babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi]());P.bind(babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].getContainer(),"click",(()=>{var e;if(babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].isDisabled()&&(e=babelHelpers.classPrivateFieldLooseBase(this,hi)[hi])!=null&&e.isShown()&&babelHelpers.classPrivateFieldLooseBase(this,xi)[xi]===false){babelHelpers.classPrivateFieldLooseBase(this,nr)[nr]()}}));return babelHelpers.classPrivateFieldLooseBase(this,ji)[ji]}async init(){if(babelHelpers.classPrivateFieldLooseBase(this,yi)[yi].length>0&&babelHelpers.classPrivateFieldLooseBase(this,wi)[wi].length>0){await Mr.checkEulaRestrict();babelHelpers.classPrivateFieldLooseBase(this,zi)[zi]();return}console.warn("AI:Copilot: Please, pass engines and prompts by constructor options");this.emit("start-init");await Mr.checkEulaRestrict();try{const e=await babelHelpers.classPrivateFieldLooseBase(this,$i)[$i]();await babelHelpers.classPrivateFieldLooseBase(this,Ui)[Ui](e)}catch(e){console.error(e)}}setSelectedText(e){babelHelpers.classPrivateFieldLooseBase(this,Bi)[Bi]=e}setContext(e){babelHelpers.classPrivateFieldLooseBase(this,Hi)[Hi]=e}setContextParameters(e){babelHelpers.classPrivateFieldLooseBase(this,fi)[fi].setContextParameters(e)}getPosition(){var e,s;return{inputField:P.Dom.getPosition(babelHelpers.classPrivateFieldLooseBase(this,pi)[pi].getPopupContainer()),menu:P.Dom.getPosition((e=babelHelpers.classPrivateFieldLooseBase(this,Gi)[Gi]())==null?void 0:(s=e.getPopup())==null?void 0:s.getPopupContainer())}}show(e){var s;if(!babelHelpers.classPrivateFieldLooseBase(this,vi)[vi]){console.error("Subscribe for finish-init before showing copilot")}if(babelHelpers.classPrivateFieldLooseBase(this,Di)[Di]){babelHelpers.classPrivateFieldLooseBase(this,Di)[Di].show();babelHelpers.classPrivateFieldLooseBase(this,Di)[Di].subscribe("finish-init",(()=>{Mr.showBanner=false;babelHelpers.classPrivateFieldLooseBase(this,Di)[Di]=null;babelHelpers.classPrivateFieldLooseBase(this,fi)[fi].setBannerLaunched();setTimeout((()=>{this.show(e)}),300)}));return}if(P.Type.isFunction(babelHelpers.classPrivateFieldLooseBase(Mr,Ni)[Ni])){babelHelpers.classPrivateFieldLooseBase(Mr,Ni)[Ni]();return}if(!babelHelpers.classPrivateFieldLooseBase(this,pi)[pi]){P.bind(document,"mousedown",babelHelpers.classPrivateFieldLooseBase(this,ur)[ur].bind(this))}(s=babelHelpers.classPrivateFieldLooseBase(this,pi)[pi])==null?void 0:s.destroy();babelHelpers.classPrivateFieldLooseBase(this,pi)[pi]=new n.Popup({className:"ai__copilot_input-popup",bindElement:e.bindElement,content:this.render(),padding:0,width:e.width,contentNoPaddings:true,borderRadius:"0px",autoHide:babelHelpers.classPrivateFieldLooseBase(this,ki)[ki],closeByEsc:true,autoHideHandler:e=>babelHelpers.classPrivateFieldLooseBase(this,Pr)[Pr](e),events:{onPopupClose:()=>{babelHelpers.classPrivateFieldLooseBase(this,Ei)[Ei]=-1;babelHelpers.classPrivateFieldLooseBase(this,Lr)[Lr]();babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].stopRecording();babelHelpers.classPrivateFieldLooseBase(this,Ai)[Ai]=[];babelHelpers.classPrivateFieldLooseBase(this,Fi)[Fi]=""}}});babelHelpers.classPrivateFieldLooseBase(this,pi)[pi].show();babelHelpers.classPrivateFieldLooseBase(this,Zi)[Zi]().setContextElementEditorButton();if(!e.showFromSpace&&!e.showFromPopup){if(!babelHelpers.classPrivateFieldLooseBase(this,Bi)[Bi]||babelHelpers.classPrivateFieldLooseBase(this,Bi)[Bi]===""){babelHelpers.classPrivateFieldLooseBase(this,Zi)[Zi]().setContextElementSpaceButton()}}else if(e.showFromSpace&&e.showFromSpace===true){babelHelpers.classPrivateFieldLooseBase(this,Zi)[Zi]().setContextElementSpaceButton()}else if(e.showFromPopup&&e.showFromPopup===true){babelHelpers.classPrivateFieldLooseBase(this,Zi)[Zi]().setContextElementPopupButton()}babelHelpers.classPrivateFieldLooseBase(this,Zi)[Zi]().sendEventOpen();babelHelpers.classPrivateFieldLooseBase(this,vi)[vi].setFilter("");babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].focus();if(babelHelpers.classPrivateFieldLooseBase(this,xi)[xi]){babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].disable()}babelHelpers.classPrivateFieldLooseBase(this,Fr)[Fr]()}hide(){var e;babelHelpers.classPrivateFieldLooseBase(this,Bi)[Bi]="";babelHelpers.classPrivateFieldLooseBase(this,Hi)[Hi]="";P.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,ji)[ji],"--error");if(babelHelpers.classPrivateFieldLooseBase(this,vi)[vi]){babelHelpers.classPrivateFieldLooseBase(this,vi)[vi].close()}if(babelHelpers.classPrivateFieldLooseBase(this,hi)[hi]){babelHelpers.classPrivateFieldLooseBase(this,hi)[hi].close()}if(babelHelpers.classPrivateFieldLooseBase(this,ui)[ui]){babelHelpers.classPrivateFieldLooseBase(this,ui)[ui].close();babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].clearErrors()}const s=n.PopupManager.getPopupById("ai__copilot_error-popup");if(s){s.destroy()}babelHelpers.classPrivateFieldLooseBase(this,pi)[pi].close();babelHelpers.classPrivateFieldLooseBase(this,Bi)[Bi]="";(e=babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi])==null?void 0:e.clear();this.emit("hide")}isShown(){var e,s;return(e=(s=babelHelpers.classPrivateFieldLooseBase(this,pi)[pi])==null?void 0:s.isShown())!=null?e:false}adjustWidth(e){var s;(s=babelHelpers.classPrivateFieldLooseBase(this,pi)[pi])==null?void 0:s.setWidth(e)}adjust(e){if(e.hide){var s,a;(s=babelHelpers.classPrivateFieldLooseBase(this,pi)[pi])==null?void 0:s.setMaxWidth(0);(a=babelHelpers.classPrivateFieldLooseBase(this,pi)[pi])==null?void 0:a.setMinWidth(0);babelHelpers.classPrivateFieldLooseBase(this,Lr)[Lr]()}else{var l,t;(l=babelHelpers.classPrivateFieldLooseBase(this,pi)[pi])==null?void 0:l.setMaxWidth(null);(t=babelHelpers.classPrivateFieldLooseBase(this,pi)[pi])==null?void 0:t.setMinWidth(null);this.adjustPosition(e.position);babelHelpers.classPrivateFieldLooseBase(this,Fr)[Fr]()}}adjustPosition(e){if(!babelHelpers.classPrivateFieldLooseBase(this,pi)[pi]){return}if(e){babelHelpers.classPrivateFieldLooseBase(this,pi)[pi].setBindElement(e)}babelHelpers.classPrivateFieldLooseBase(this,pi)[pi].adjustPosition({})}}async function Er(){if(babelHelpers.classPrivateFieldLooseBase(Mr,Wi)[Wi][babelHelpers.classPrivateFieldLooseBase(this,Oi)[Oi]]===undefined){babelHelpers.classPrivateFieldLooseBase(Mr,Wi)[Wi][babelHelpers.classPrivateFieldLooseBase(this,Oi)[Oi]]=babelHelpers.classPrivateFieldLooseBase(this,fi)[fi].getTooling("text")}return babelHelpers.classPrivateFieldLooseBase(Mr,Wi)[Wi][babelHelpers.classPrivateFieldLooseBase(this,Oi)[Oi]]}function jr(){var e,s;if(((e=babelHelpers.classPrivateFieldLooseBase(this,yi)[yi])==null?void 0:e.length)>0&&((s=babelHelpers.classPrivateFieldLooseBase(this,wi)[wi])==null?void 0:s.length)>0){const e=babelHelpers.classPrivateFieldLooseBase(this,yi)[yi].find((e=>e.selected));babelHelpers.classPrivateFieldLooseBase(this,mi)[mi]=e?e.code:babelHelpers.classPrivateFieldLooseBase(this,yi)[yi][0].code;babelHelpers.classPrivateFieldLooseBase(this,Hr)[Hr]()}}async function Kr(e){babelHelpers.classPrivateFieldLooseBase(this,yi)[yi]=e.data.engines;babelHelpers.classPrivateFieldLooseBase(this,wi)[wi]=e.data.prompts;babelHelpers.classPrivateFieldLooseBase(this,Ri)[Ri]=e.data.permissions;const s=e.data.portal_zone;if(Mr.showBanner===null){Mr.showBanner=e.data.first_launch}if(e.data.first_launch&&Mr.showBanner){const{CopilotBanner:e}=await di("ai.copilot-banner");babelHelpers.classPrivateFieldLooseBase(this,Di)[Di]=new e({isWestZone:s!=="ru"&&s!=="by"&&s!=="kz"})}babelHelpers.classPrivateFieldLooseBase(this,zi)[zi]();this.emit("finish-init")}function Tr(){var e,s,a;if((e=babelHelpers.classPrivateFieldLooseBase(this,vi)[vi])!=null&&e.isShown()){return babelHelpers.classPrivateFieldLooseBase(this,vi)[vi]}if((s=babelHelpers.classPrivateFieldLooseBase(this,ui)[ui])!=null&&s.isShown()){return babelHelpers.classPrivateFieldLooseBase(this,ui)[ui]}if((a=babelHelpers.classPrivateFieldLooseBase(this,hi)[hi])!=null&&a.isShown()){return babelHelpers.classPrivateFieldLooseBase(this,hi)[hi]}return null}function xr(e){if(!e){return""}const s=babelHelpers.classPrivateFieldLooseBase(this,wr)[wr](e);if(!s){return""}return s.title.endsWith("...")?s.title.slice(0,-3):s.title}function Ar(){babelHelpers.classPrivateFieldLooseBase(this,Si)[Si]=new Ra;return babelHelpers.classPrivateFieldLooseBase(this,Si)[Si].render()}function Sr(){babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi]=new ta({readonly:babelHelpers.classPrivateFieldLooseBase(this,xi)[xi]});babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].subscribe(vs.focus,(()=>{babelHelpers.classPrivateFieldLooseBase(this,vi)[vi].setBindElement(babelHelpers.classPrivateFieldLooseBase(this,ji)[ji],{top:babelHelpers.classPrivateFieldLooseBase(this,Mi)[Mi]});if(!babelHelpers.classPrivateFieldLooseBase(this,hi)[hi]||!babelHelpers.classPrivateFieldLooseBase(this,hi)[hi].isShown()){babelHelpers.classPrivateFieldLooseBase(this,vi)[vi].open()}}));babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].subscribe(vs.adjustHeight,(()=>{setTimeout((()=>{babelHelpers.classPrivateFieldLooseBase(this,Fr)[Fr]()}),150)}));babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].subscribe(vs.cancelLoading,(()=>{babelHelpers.classPrivateFieldLooseBase(this,Ei)[Ei]=-1;babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].finishGenerating();babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].focus();babelHelpers.classPrivateFieldLooseBase(this,Ti)[Ti]=0;if(babelHelpers.classPrivateFieldLooseBase(this,xi)[xi]){babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].clear()}}));babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].subscribe(vs.input,(e=>{babelHelpers.classPrivateFieldLooseBase(this,Fi)[Fi]=e.getData();const s=babelHelpers.classPrivateFieldLooseBase(this,Xi)[Xi](babelHelpers.classPrivateFieldLooseBase(this,Ci)[Ci]);if(babelHelpers.classPrivateFieldLooseBase(this,Fi)[Fi].indexOf(s)!==0){babelHelpers.classPrivateFieldLooseBase(this,Ci)[Ci]=null}babelHelpers.classPrivateFieldLooseBase(this,vi)[vi].setFilter(babelHelpers.classPrivateFieldLooseBase(this,Fi)[Fi]);requestAnimationFrame((()=>{babelHelpers.classPrivateFieldLooseBase(this,Fr)[Fr]()}))}));babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].subscribe(vs.submit,(()=>{const e=babelHelpers.classPrivateFieldLooseBase(this,Ci)[Ci]||"zero_prompt";let s=babelHelpers.classPrivateFieldLooseBase(this,Fi)[Fi];if(!s&&e==="zero_prompt"){return}if(babelHelpers.classPrivateFieldLooseBase(this,Ci)[Ci]){const e=babelHelpers.classPrivateFieldLooseBase(this,Xi)[Xi](babelHelpers.classPrivateFieldLooseBase(this,Ci)[Ci]);s=babelHelpers.classPrivateFieldLooseBase(this,Fi)[Fi].replaceAll(new RegExp(e,"g"),"").trim()}babelHelpers.classPrivateFieldLooseBase(this,vr)[vr]({command:e,markers:{userMessage:s,originalMessage:babelHelpers.classPrivateFieldLooseBase(this,Bi)[Bi]||babelHelpers.classPrivateFieldLooseBase(this,Hi)[Hi]||"",current_result:babelHelpers.classPrivateFieldLooseBase(this,Ai)[Ai]}});babelHelpers.classPrivateFieldLooseBase(this,Yi)[Yi]()}));babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].subscribe(vs.goOutFromBottom,(()=>{babelHelpers.classPrivateFieldLooseBase(this,vi)[vi].enableArrowsKey()}));babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].subscribe(vs.startRecording,(()=>{babelHelpers.classPrivateFieldLooseBase(this,vi)[vi].close()}));babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].subscribe(vs.stopRecording,(()=>{if(babelHelpers.classPrivateFieldLooseBase(this,pi)[pi].isShown()){babelHelpers.classPrivateFieldLooseBase(this,vi)[vi].open()}}));return babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].render()}async function Dr(){var e;babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].startGenerating();P.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,ji)[ji],"--error");babelHelpers.classPrivateFieldLooseBase(this,vi)[vi].close();(e=babelHelpers.classPrivateFieldLooseBase(this,ui)[ui])==null?void 0:e.close();if(babelHelpers.classPrivateFieldLooseBase(this,hi)[hi]){babelHelpers.classPrivateFieldLooseBase(this,hi)[hi].close()}const s=Math.round(Math.random()*1e4);babelHelpers.classPrivateFieldLooseBase(this,Ei)[Ei]=s;try{var a;babelHelpers.classPrivateFieldLooseBase(this,Zi)[Zi]().sendEventGenerate();const e=babelHelpers.classPrivateFieldLooseBase(this,pi)[pi];const l=await babelHelpers.classPrivateFieldLooseBase(this,fi)[fi].textCompletions();if(babelHelpers.classPrivateFieldLooseBase(this,Ei)[Ei]!==s){return}if(!((a=babelHelpers.classPrivateFieldLooseBase(this,pi)[pi])!=null&&a.isShown())||babelHelpers.classPrivateFieldLooseBase(this,pi)[pi]!==e){return}babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].finishGenerating();babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].disable();babelHelpers.classPrivateFieldLooseBase(this,gi)[gi]=l.data.result;if(babelHelpers.classPrivateFieldLooseBase(this,Bi)[Bi]||babelHelpers.classPrivateFieldLooseBase(this,xi)[xi]){babelHelpers.classPrivateFieldLooseBase(this,Li)[Li].clearResult();babelHelpers.classPrivateFieldLooseBase(this,Li)[Li].addResult(babelHelpers.classPrivateFieldLooseBase(this,gi)[gi])}else{this.emit("aiResult",{result:babelHelpers.classPrivateFieldLooseBase(this,gi)[gi]})}babelHelpers.classPrivateFieldLooseBase(this,Qi)[Qi](babelHelpers.classPrivateFieldLooseBase(this,gi)[gi]);babelHelpers.classPrivateFieldLooseBase(this,Zi)[Zi]().sendEventSuccess();babelHelpers.classPrivateFieldLooseBase(this,Ji)[Ji]();babelHelpers.classPrivateFieldLooseBase(this,tr)[tr]()}catch(e){babelHelpers.classPrivateFieldLooseBase(this,Zi)[Zi]().sendEventError();if(babelHelpers.classPrivateFieldLooseBase(this,Ei)[Ei]!==s){return}babelHelpers.classPrivateFieldLooseBase(this,er)[er](e)}}function Rr(){if(!babelHelpers.classPrivateFieldLooseBase(this,_i)[_i]){babelHelpers.classPrivateFieldLooseBase(this,_i)[_i]=new Zt;babelHelpers.classPrivateFieldLooseBase(this,_i)[_i].setCategoryText().setContextSection(babelHelpers.classPrivateFieldLooseBase(this,Oi)[Oi]).setContextTypeFromText()}if(!babelHelpers.classPrivateFieldLooseBase(this,Bi)[Bi]||babelHelpers.classPrivateFieldLooseBase(this,Bi)[Bi]===""){babelHelpers.classPrivateFieldLooseBase(this,_i)[_i].setTypeTextNew()}else if(babelHelpers.classPrivateFieldLooseBase(this,xi)[xi]){babelHelpers.classPrivateFieldLooseBase(this,_i)[_i].setTypeTextEdit()}else{babelHelpers.classPrivateFieldLooseBase(this,_i)[_i].setTypeTextReply()}if(babelHelpers.classPrivateFieldLooseBase(this,fi)[fi]&&babelHelpers.classPrivateFieldLooseBase(this,fi)[fi].getPayload()){babelHelpers.classPrivateFieldLooseBase(this,_i)[_i].setParams({prompt:babelHelpers.classPrivateFieldLooseBase(this,_r)[_r](),provider:babelHelpers.classPrivateFieldLooseBase(this,mi)[mi]})}return babelHelpers.classPrivateFieldLooseBase(this,_i)[_i]}function Nr(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,Si)[Si])==null?void 0:e.expand()}function Wr(e){const s=3;babelHelpers.classPrivateFieldLooseBase(this,Ai)[Ai].unshift(e);if(babelHelpers.classPrivateFieldLooseBase(this,Ai)[Ai].length>s){babelHelpers.classPrivateFieldLooseBase(this,Ai)[Ai].pop()}}function $r(e){console.error(e);const s=4;if(e instanceof Error){babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].setErrors([{message:e.message,code:-1,customData:{}}])}else if(P.Type.isString(e)){babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].setErrors([{message:e,code:-1,customData:{}}])}else if(e!=null&&e.errors){var a,l,t,i;if((e==null?void 0:(a=e.errors[0])==null?void 0:a.code)==="LIMIT_IS_EXCEEDED_MONTHLY"||(e==null?void 0:(l=e.errors[0])==null?void 0:l.code)==="SERVICE_IS_NOT_AVAILABLE_BY_TARIFF"){BX.UI.InfoHelper.show("limit_copilot_requests");this.hide();return}if((e==null?void 0:(t=e.errors[0])==null?void 0:t.code)==="LIMIT_IS_EXCEEDED_DAILY"){BX.UI.InfoHelper.show("limit_copilot_max_number_daily_requests");this.hide();return}if(babelHelpers.classPrivateFieldLooseBase(this,sr)[sr](e)){babelHelpers.classPrivateFieldLooseBase(this,ar)[ar](e);return}if((e==null?void 0:(i=e.errors[0])==null?void 0:i.code)===100&&babelHelpers.classPrivateFieldLooseBase(this,Ti)[Ti]<s){babelHelpers.classPrivateFieldLooseBase(this,Ti)[Ti]+=1;babelHelpers.classPrivateFieldLooseBase(this,Yi)[Yi]();return}babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].setErrors(e.errors)}else{babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].setErrors([{code:"UNDEFINED_ERROR",message:"Undefined error"}])}babelHelpers.classPrivateFieldLooseBase(this,Ti)[Ti]=0;P.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,ji)[ji],"--error");babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].finishGenerating();babelHelpers.classPrivateFieldLooseBase(this,lr)[lr]();babelHelpers.classPrivateFieldLooseBase(this,ui)[ui].adjustPosition();babelHelpers.classPrivateFieldLooseBase(this,ui)[ui].open()}function zr(e){return e.errors.some((e=>e.code==="AGREEMENT_IS_NOT_ACCEPTED"))}function Ur(e){this.hide();const s=e.errors.find((e=>e.code==="AGREEMENT_IS_NOT_ACCEPTED"));const a=new h.Agreement({agreement:{title:s.customData.title,text:s.customData.text,accepted:false},engineCode:babelHelpers.classPrivateFieldLooseBase(this,mi)[mi],engine:babelHelpers.classPrivateFieldLooseBase(this,fi)[fi],type:"text"});a.showAgreementPopup((()=>{}))}function Gr(){babelHelpers.classPrivateFieldLooseBase(this,ui)[ui]=new Pt({bindElement:babelHelpers.classPrivateFieldLooseBase(this,pi)[pi].getPopupContainer(),offsetTop:babelHelpers.classPrivateFieldLooseBase(this,Mi)[Mi],items:oi.getMenuItems(),keyboardControlOptions:{canGoOutFromTop:false,highlightFirstItemAfterShow:true,clearHighlightAfterType:false}});babelHelpers.classPrivateFieldLooseBase(this,ui)[ui].subscribe(Vl.select,(e=>{switch(e.getData().command){case"repeat":{babelHelpers.classPrivateFieldLooseBase(this,br)[br]();break}case"cancel":{babelHelpers.classPrivateFieldLooseBase(this,cr)[cr]();break}case"edit":{babelHelpers.classPrivateFieldLooseBase(this,nr)[nr]();break}default:{throw new Error("AI.Copilot: Unhandled command from error menu")}}}));babelHelpers.classPrivateFieldLooseBase(this,ui)[ui].setBindElement(babelHelpers.classPrivateFieldLooseBase(this,pi)[pi].getPopupContainer(),{top:babelHelpers.classPrivateFieldLooseBase(this,Mi)[Mi]})}function Xr(){babelHelpers.classPrivateFieldLooseBase(this,ir)[ir]();if(babelHelpers.classPrivateFieldLooseBase(this,hi)[hi].isShown()||!babelHelpers.classPrivateFieldLooseBase(this,pi)[pi].isShown()){return}babelHelpers.classPrivateFieldLooseBase(this,hi)[hi].setBindElement(babelHelpers.classPrivateFieldLooseBase(this,pi)[pi].getPopupContainer(),{top:babelHelpers.classPrivateFieldLooseBase(this,Mi)[Mi]});babelHelpers.classPrivateFieldLooseBase(this,hi)[hi].open()}function Vr(){babelHelpers.classPrivateFieldLooseBase(this,hi)[hi]=new Pt({items:babelHelpers.classPrivateFieldLooseBase(this,rr)[rr](),keyboardControlOptions:{clearHighlightAfterType:false,canGoOutFromTop:false,highlightFirstItemAfterShow:true}});babelHelpers.classPrivateFieldLooseBase(this,hi)[hi].subscribe(Vl.select,(e=>{babelHelpers.classPrivateFieldLooseBase(this,or)[or](e.getData().command)}))}function qr(){if(babelHelpers.classPrivateFieldLooseBase(this,xi)[xi]){return ti.getMenuItemsForReadonlyResult()}return ti.getMenuItems({prompts:babelHelpers.classPrivateFieldLooseBase(this,wi)[wi],selectedText:babelHelpers.classPrivateFieldLooseBase(this,Bi)[Bi]})}function Yr(e){switch(e){case L.save:{this.emit("save",{result:babelHelpers.classPrivateFieldLooseBase(this,gi)[gi],code:babelHelpers.classPrivateFieldLooseBase(this,_r)[_r]()});babelHelpers.classPrivateFieldLooseBase(this,Zi)[Zi]().sendEventSave();break}case L.addBelow:{this.emit("add_below",{result:babelHelpers.classPrivateFieldLooseBase(this,gi)[gi],code:babelHelpers.classPrivateFieldLooseBase(this,_r)[_r]()});break}case L.edit:{babelHelpers.classPrivateFieldLooseBase(this,nr)[nr]();break}case L.repeat:{babelHelpers.classPrivateFieldLooseBase(this,br)[br]();break}case L.cancel:{babelHelpers.classPrivateFieldLooseBase(this,cr)[cr]();break}case L.close:{babelHelpers.classPrivateFieldLooseBase(this,dr)[dr]();break}case L.copy:{babelHelpers.classPrivateFieldLooseBase(this,pr)[pr]();break}case L.continue:case L.makeLonger:{babelHelpers.classPrivateFieldLooseBase(this,vr)[vr]({command:e,markers:{originalMessage:babelHelpers.classPrivateFieldLooseBase(this,gi)[gi],userMessage:babelHelpers.classPrivateFieldLooseBase(this,Fi)[Fi]}});babelHelpers.classPrivateFieldLooseBase(this,Yi)[Yi]();break}case L.feedback:{babelHelpers.classPrivateFieldLooseBase(this,kr)[kr](false);this.hide();break}default:{throw new Error(`Unhandled result command ${e}`)}}}function Zr(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,hi)[hi])==null?void 0:e.adjustPosition();babelHelpers.classPrivateFieldLooseBase(this,Yi)[Yi]()}function Jr(){var e,s;babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].enable();(e=babelHelpers.classPrivateFieldLooseBase(this,hi)[hi])==null?void 0:e.close();(s=babelHelpers.classPrivateFieldLooseBase(this,ui)[ui])==null?void 0:s.close();babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].clearErrors();P.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,ji)[ji],"--error");babelHelpers.classPrivateFieldLooseBase(this,vi)[vi].open();babelHelpers.classPrivateFieldLooseBase(this,Ci)[Ci]=null}function Qr(){var e,s;(e=babelHelpers.classPrivateFieldLooseBase(this,hi)[hi])==null?void 0:e.close();(s=babelHelpers.classPrivateFieldLooseBase(this,ui)[ui])==null?void 0:s.close();babelHelpers.classPrivateFieldLooseBase(this,vi)[vi].open();babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].clearErrors();babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].clear();P.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,ji)[ji],"--error");babelHelpers.classPrivateFieldLooseBase(this,Ci)[Ci]=null;babelHelpers.classPrivateFieldLooseBase(this,Ai)[Ai]=[];this.emit("cancel")}function eo(){this.hide()}function so(){var e;return(e=navigator.clipboard)==null?void 0:e.writeText(babelHelpers.classPrivateFieldLooseBase(this,Li)[Li].getResult()).then((()=>{t.Notifier.notify({id:"ai_copilot_copy",text:P.Loc.getMessage("AI_COPILOT_TEXT_IS_COPIED")})}))}function ao(e={}){const s=e.command||"";const l=e.markers||{};const t=l.userMessage||undefined;const i=l.originalMessage||undefined;const r=new a.Text({prompt:{code:s},engineCode:babelHelpers.classPrivateFieldLooseBase(this,mi)[mi]});r.setMarkers({original_message:babelHelpers.classPrivateFieldLooseBase(this,Or)[Or](s)?i:undefined,user_message:babelHelpers.classPrivateFieldLooseBase(this,mr)[mr](s)?t:undefined,current_result:babelHelpers.classPrivateFieldLooseBase(this,Ai)[Ai]});babelHelpers.classPrivateFieldLooseBase(this,fi)[fi].setPayload(r)}function lo(){babelHelpers.classPrivateFieldLooseBase(this,Li)[Li]=new I;return babelHelpers.classPrivateFieldLooseBase(this,Li)[Li].render()}function to(e){this.wasMouseDownOnSelf=babelHelpers.classPrivateFieldLooseBase(this,pi)[pi].getPopupContainer().contains(e.target)}function io(e){var s,a,l,t;const i=e.target;const r=babelHelpers.classPrivateFieldLooseBase(this,pi)[pi].getPopupContainer().contains(i);const o=(s=babelHelpers.classPrivateFieldLooseBase(this,vi)[vi])==null?void 0:s.contains(i);const b=(a=babelHelpers.classPrivateFieldLooseBase(this,hi)[hi])==null?void 0:a.contains(i);const c=(l=babelHelpers.classPrivateFieldLooseBase(this,ui)[ui])==null?void 0:l.contains(i);const d=babelHelpers.classPrivateFieldLooseBase(this,Ii)[Ii](e);const p=n.PopupManager.getPopupById("ai__copilot_error-popup");const v=p==null?void 0:(t=p.getPopupContainer())==null?void 0:t.contains(i);const h=!r&&!c&&!v&&!o&&!b&&!d&&!this.wasMouseDownOnSelf;if(h){if(p!=null&&p.isShown()){p.close()}else{this.hide()}}this.wasMouseDownOnSelf=false;return false}function ro(){var e,s,a;(e=babelHelpers.classPrivateFieldLooseBase(this,hi)[hi])==null?void 0:e.hide();(s=babelHelpers.classPrivateFieldLooseBase(this,ui)[ui])==null?void 0:s.hide();(a=babelHelpers.classPrivateFieldLooseBase(this,vi)[vi])==null?void 0:a.hide()}function oo(){var e,s,a;(e=babelHelpers.classPrivateFieldLooseBase(this,hi)[hi])==null?void 0:e.show();(s=babelHelpers.classPrivateFieldLooseBase(this,ui)[ui])==null?void 0:s.show();(a=babelHelpers.classPrivateFieldLooseBase(this,vi)[vi])==null?void 0:a.show()}function bo(){var e;babelHelpers.classPrivateFieldLooseBase(this,vi)[vi]=new Pt({items:y.getMenuItems({prompts:babelHelpers.classPrivateFieldLooseBase(this,wi)[wi],engines:babelHelpers.classPrivateFieldLooseBase(this,yi)[yi],selectedEngineCode:babelHelpers.classPrivateFieldLooseBase(this,mi)[mi],canEditSettings:((e=babelHelpers.classPrivateFieldLooseBase(this,Ri)[Ri])==null?void 0:e.can_edit_settings)===true}),keyboardControlOptions:{clearHighlightAfterType:!babelHelpers.classPrivateFieldLooseBase(this,xi)[xi],canGoOutFromTop:!babelHelpers.classPrivateFieldLooseBase(this,xi)[xi],highlightFirstItemAfterShow:babelHelpers.classPrivateFieldLooseBase(this,xi)[xi]},forceTop:babelHelpers.classPrivateFieldLooseBase(this,Ki)[Ki]});babelHelpers.classPrivateFieldLooseBase(this,vi)[vi].getPopup().subscribeFromOptions({onBeforeShow:()=>{if(babelHelpers.classPrivateFieldLooseBase(this,xi)[xi]){babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].disable()}},onAfterShow:()=>{if(babelHelpers.classPrivateFieldLooseBase(this,xi)[xi]===false){babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].enable();babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].focus()}}});babelHelpers.classPrivateFieldLooseBase(this,vi)[vi].subscribe(Vl.select,(e=>{babelHelpers.classPrivateFieldLooseBase(this,Br)[Br](e)}));babelHelpers.classPrivateFieldLooseBase(this,vi)[vi].subscribe(Vl.clearHighlight,(()=>{babelHelpers.classPrivateFieldLooseBase(this,vi)[vi].disableArrowsKey();babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].enableEnterAndArrows()}));babelHelpers.classPrivateFieldLooseBase(this,vi)[vi].subscribe(Vl.highlightMenuItem,(()=>{babelHelpers.classPrivateFieldLooseBase(this,vi)[vi].enableArrowsKey();babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].disableEnterAndArrows()}))}function no(e){const{command:s}=e.data;const a=babelHelpers.classPrivateFieldLooseBase(this,yi)[yi].some((e=>e.code===s));if(a){babelHelpers.classPrivateFieldLooseBase(this,Cr)[Cr](s)}else if(s===L.feedback){babelHelpers.classPrivateFieldLooseBase(this,kr)[kr](true);this.hide()}else if(s==="market");else if(s==="about_open_copilot"){const e="19092894";if(top.BX&&top.BX.Helper){top.BX.Helper.show(`redirect=detail&code=${e}`)}}else if(babelHelpers.classPrivateFieldLooseBase(this,mr)[mr](s)){babelHelpers.classPrivateFieldLooseBase(this,Ci)[Ci]=s;babelHelpers.classPrivateFieldLooseBase(this,fr)[fr](s)}else{babelHelpers.classPrivateFieldLooseBase(this,Ci)[Ci]=s;babelHelpers.classPrivateFieldLooseBase(this,yr)[yr](s)}}function co(e){babelHelpers.classPrivateFieldLooseBase(this,vr)[vr]({command:e,markers:{originalMessage:babelHelpers.classPrivateFieldLooseBase(this,Bi)[Bi]||babelHelpers.classPrivateFieldLooseBase(this,Hi)[Hi],userMessage:babelHelpers.classPrivateFieldLooseBase(this,Fi)[Fi]}});babelHelpers.classPrivateFieldLooseBase(this,Yi)[Yi]()}function po(e){babelHelpers.classPrivateFieldLooseBase(this,vr)[vr]({command:e,markers:{originalMessage:babelHelpers.classPrivateFieldLooseBase(this,Bi)[Bi]||babelHelpers.classPrivateFieldLooseBase(this,Hi)[Hi],userMessage:babelHelpers.classPrivateFieldLooseBase(this,Fi)[Fi]}});const s=babelHelpers.classPrivateFieldLooseBase(this,gr)[gr](babelHelpers.classPrivateFieldLooseBase(this,wi)[wi],e);babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].setValue(s);babelHelpers.classPrivateFieldLooseBase(this,Yi)[Yi]()}function vo(e,s){let a="";for(const l of e){if(l.code===s){a=l.title;break}const e=l.children;if(e&&e.length>0){const t=babelHelpers.classPrivateFieldLooseBase(this,gr)[gr](e,s);if(t){a=`${l.title} - ${t}`;break}}}return a}function ho(e){const s=babelHelpers.classPrivateFieldLooseBase(this,wr)[wr](e);if(!s){return false}return s.required.user_message}function uo(e){const s=babelHelpers.classPrivateFieldLooseBase(this,wr)[wr](e);if(!s){return false}return s.required.context_message}function Po(e){let s=null;babelHelpers.classPrivateFieldLooseBase(this,wi)[wi].some((a=>{var l;if(a.code===e){s=a;return true}return(l=a.children)==null?void 0:l.some((a=>{if(a.code===e){s=a;return true}return false}))}));return s}function Lo(){var e,s;return((e=babelHelpers.classPrivateFieldLooseBase(this,fi)[fi].getPayload().getRawData())==null?void 0:(s=e.prompt)==null?void 0:s.code)||""}function Fo(e){const s=babelHelpers.classPrivateFieldLooseBase(this,yi)[yi].some((s=>s.code===e));if(s){babelHelpers.classPrivateFieldLooseBase(this,Ir)[Ir](e)}babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].focus()}function Ho(e){babelHelpers.classPrivateFieldLooseBase(this,mi)[mi]=e;babelHelpers.classPrivateFieldLooseBase(this,vi)[vi].replaceMenuItemSubmenu({code:"provider",children:H.getMenuItems({engines:babelHelpers.classPrivateFieldLooseBase(this,yi)[yi],selectedEngineCode:babelHelpers.classPrivateFieldLooseBase(this,mi)[mi]})})}function Bo(e=false){const s=`${babelHelpers.classPrivateFieldLooseBase(this,Oi)[Oi]},${e?"before":"after"}`;BX.UI.Feedback.Form.open({id:String(Math.random()),forms:[{zones:["es"],id:684,lang:"es",sec:"svvq1x"},{zones:["en"],id:686,lang:"en",sec:"tjwodz"},{zones:["de"],id:688,lang:"de",sec:"nrwksg"},{zones:["com.br"],id:690,lang:"com.br",sec:"kpte6m"},{zones:["ru","by","kz"],id:692,lang:"ru",sec:"jbujn0"}],presets:{sender_page:s}})}Object.defineProperty(Mr,Ni,{writable:true,value:null});Mr.showBanner=null;Object.defineProperty(Mr,Wi,{writable:true,value:{}});e.loadExtensionWrapper=di;e.Copilot=Mr})(this.BX.AI=this.BX.AI||{},BX.AI,BX.AI.Payload,BX,BX.UI.NotificationManager,BX,BX.UI,BX.AI,BX,BX.Main,BX.Event,BX,BX,BX,BX.AI,BX.UI.IconSet,BX);
//# sourceMappingURL=copilot.bundle.map.js